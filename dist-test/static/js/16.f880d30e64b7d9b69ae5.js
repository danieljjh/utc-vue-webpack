webpackJsonp([16],{"3Xu3":function(t,e,a){(t.exports=a("FZ+f")(!0)).push([t.i,"\n.Posterpictures {\r\n  width: 100%;\n}\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\n}\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\n}\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\n}\r\n","",{version:3,sources:["D:/my-vue-webpack/utc-vue-webpack/src/views/admin/src/views/admin/official-activities.vue"],names:[],mappings:";AA4NA;EACA,YAAA;CACA;AACA;EACA,aAAA;EACA,wBAAA;CACA;AAEA;EACA,2BAAA;EACA,mBAAA;EACA,gBAAA;EACA,mBAAA;EACA,iBAAA;CACA;AACA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;EACA,aAAA;EACA,cAAA;EACA,mBAAA;EACA,mBAAA;CACA;AACA;EACA,aAAA;EACA,cAAA;EACA,eAAA;CACA",file:"official-activities.vue",sourcesContent:['<template>\r\n  <div>\r\n    \x3c!-- 表格显示 --\x3e\r\n    <div class="pagetitle">官方活动</div>\r\n\r\n    <el-button type="primary" @click="createactivity() " class="add">添加</el-button>\r\n    <el-table :data="tableData" border style="width: 100%">\r\n      <el-table-column prop="id" label="活动id"></el-table-column>\r\n      <el-table-column prop="name" label="活动名"></el-table-column>\r\n      <el-table-column prop="created_on" label="创建日期"></el-table-column>\r\n      <el-table-column prop="description" label="活动介绍"></el-table-column>\r\n      <el-table-column prop="modified_on" label="修改时间"></el-table-column>\r\n      <el-table-column prop="scene_str" label="活动key"></el-table-column>\r\n\r\n      <el-table-column prop="image" label="活动海报" width="300">\r\n        <template slot-scope="scope">\r\n          <img\r\n            :src="\'https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/\'+scope.row.post_url"\r\n            width="40"\r\n            height="40"\r\n            class="head_pic"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop="qr_url" label="活动二维码" width="300">\r\n        <template slot-scope="scope">\r\n          <img :src="scope.row.qr_url" width="40" height="40" class="head_pic" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop="modified_on" label="修改时间"></el-table-column>\r\n      <el-table-column prop="event_type" label="活动对象" width="120" :formatter="callobject"></el-table-column>\r\n      <el-table-column prop="is_active" label="活动状态" width="120" :formatter="formatSex"></el-table-column>\r\n      <el-table-column label="操作" width="300">\r\n        <template slot-scope="scope">\r\n          <el-button @click="handleClick(scope.row)" type="text" size="small">删除活动</el-button>\r\n          \x3c!-- <el-button type="text" size="small">关闭</el-button>\r\n          <el-button type="text" size="small">开启</el-button>--\x3e\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    \x3c!-- 创建活动 --\x3e\r\n    <el-dialog title="创建活动" :visible.sync="createactivityoperate">\r\n      <el-form :model="creatactivitydata">\r\n        <el-form-item label="活动名称" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.name"></el-input>\r\n        </el-form-item>\r\n        <el-row>\r\n          <el-col :span="5">\r\n            <el-form-item label="图片位置" :label-width="formLabelWidth"></el-form-item>\r\n          </el-col>\r\n          <el-col :span="6">\r\n            <el-input v-model="top" placeholder="向上偏移量"></el-input>\r\n          </el-col>\r\n          <el-col :span="6">\r\n            <el-input v-model="left" placeholder="向左偏移量"></el-input>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span="5">\r\n            <el-form-item label="二维码图片大小" :label-width="formLabelWidth"></el-form-item>\r\n          </el-col>\r\n          <el-col :span="6">\r\n            <el-input v-model="width" placeholder="宽度"></el-input>\r\n          </el-col>\r\n          <el-col :span="6">\r\n            <el-input v-model="height" placeholder="高度"></el-input>\r\n          </el-col>\r\n        </el-row>\r\n        <el-form-item label="活动介绍" :label-width="formLabelWidth">\r\n          <el-input\r\n            type="textarea"\r\n            :rows="2"\r\n            placeholder="请输入内容"\r\n            v-model="creatactivitydata.description"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="活动对象" :label-width="formLabelWidth">\r\n          <el-select v-model="creatactivitydata.event_type" placeholder="请选择活动对象">\r\n            <el-option label="用户" value="ME"></el-option>\r\n            <el-option label="技师" value="MT"></el-option>\r\n            <el-option label="代理" value="MA"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label="活动海报" :label-width="formLabelWidth">\r\n          <div>\r\n            <input type="file" @change="uploads" />\r\n            <p></p>\r\n            <img :src="imgUrl" class="Posterpictures" />\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot="footer" class="dialog-footer">\r\n        <el-button @click="createactivityoperate = false">取 消</el-button>\r\n        <el-button type="primary" @click="createactivities()">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgUrl: "",\r\n      dialogFormVisible: false,\r\n      createactivityoperate: false,\r\n      top: "",\r\n      left: "",\r\n      width: "",\r\n      height: "",\r\n      formLabelWidth: "120px",\r\n      tableData: [],\r\n      creatactivitydata: {\r\n        qr_box: "",\r\n        qr_size: "",\r\n        name: "",\r\n        event_type: "",\r\n        description: "",\r\n        post_url: ""\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    var _that = this;\r\n    this.$axios\r\n      .get("https://wx.upctech.com.cn/wx/event/market_event_temp/list/")\r\n      .then(res => {\r\n        this._data.tableData = res.data;\r\n      });\r\n  },\r\n  methods: {\r\n    //显示创建活动模板\r\n    createactivity() {\r\n      this._data.createactivityoperate = true;\r\n    },\r\n    //创建活动\r\n    createactivities() {\r\n      var _that = this;\r\n      console.log(this._data.creatactivitydata);\r\n      if (this._data.creatactivitydata.name == "") {\r\n        this.$message.error("没有填写活动名称");\r\n      } else if (this._data.creatactivitydata.event_type == "") {\r\n        this.$message.error("没有填写活动对象");\r\n      } else if (this._data.creatactivitydata.description == "") {\r\n        this.$message.error("没有填写活动内容");\r\n      } else if (this._data.creatactivitydata.post_url == "") {\r\n        this.$message.error("抱歉没有选择图片");\r\n      } else {\r\n        this._data.createactivityoperate = false;\r\n        this._data.creatactivitydata.qr_box =\r\n          "(" + this._data.left + "," + this._data.top + ")";\r\n        this._data.creatactivitydata.qr_size =\r\n          "(" + this._data.width + "," + this._data.height + ")";\r\n        this.$axios\r\n          .post(\r\n            "https://wx.upctech.com.cn/wx/event/market_event_temp/create/",\r\n            this._data.creatactivitydata\r\n          )\r\n          .then(res => {\r\n            this.$message("创建成功");\r\n            window.location.reload();\r\n          });\r\n      }\r\n    },\r\n    uploads(e) {\r\n      var _that = this;\r\n      const file = e.target.files[0]; //获取到当前文件对象\r\n      this.imgUrl = URL.createObjectURL(file); // 这是为了显示图片而已， 与上传没有关系（可选）\r\n\r\n      // 传递一个 FormData 对象 即可\r\n      let formData = new FormData();\r\n      formData.append("image", file); // \'file\' 可变 相当于 input 表单的name 属性\r\n      // 服务器只需按照正常的上传程序代码即可\r\n      this.$http\r\n        .post("https://wx.upctech.com.cn/wx/img/image/upload/", formData)\r\n        .then(rs => {\r\n          this._data.creatactivitydata.post_url = rs.data.img_name;\r\n          this.$message("上传成功");\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    formatSex(row, column, cellValue) {\r\n      if (cellValue === true) {\r\n        return "进行中";\r\n      } else if (cellValue === false) {\r\n        return "已结束";\r\n      }\r\n    },\r\n    callobject(row, column, cellValue) {\r\n      if (cellValue === "MT") {\r\n        return "会员推广";\r\n      } else if (cellValue === "ME") {\r\n        return "用户推广";\r\n      } else if (cellValue === "MA") {\r\n        return "代理推广";\r\n      }\r\n    },\r\n    handleClick(e) {\r\n      var _that = this;\r\n      this.$axios\r\n        .get(\r\n          "https://wx.upctech.com.cn/wx/event/market_event_temp/delete?event_id=" +\r\n            e.id\r\n        )\r\n        .then(res => {\r\n          if (res.data.erro == "done") {\r\n            this.$message("删除成功");\r\n            window.location.reload();\r\n          } else {\r\n            this.$message.error("删除失败");\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n<\/script>\r\n<style>\r\n.Posterpictures {\r\n  width: 100%;\r\n}\r\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>'],sourceRoot:""}])},C6s5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{imgUrl:"",dialogFormVisible:!1,createactivityoperate:!1,top:"",left:"",width:"",height:"",formLabelWidth:"120px",tableData:[],creatactivitydata:{qr_box:"",qr_size:"",name:"",event_type:"",description:"",post_url:""}}},mounted:function(){var t=this;this.$axios.get("https://wx.upctech.com.cn/wx/event/market_event_temp/list/").then(function(e){t._data.tableData=e.data})},methods:{createactivity:function(){this._data.createactivityoperate=!0},createactivities:function(){var t=this;console.log(this._data.creatactivitydata),""==this._data.creatactivitydata.name?this.$message.error("没有填写活动名称"):""==this._data.creatactivitydata.event_type?this.$message.error("没有填写活动对象"):""==this._data.creatactivitydata.description?this.$message.error("没有填写活动内容"):""==this._data.creatactivitydata.post_url?this.$message.error("抱歉没有选择图片"):(this._data.createactivityoperate=!1,this._data.creatactivitydata.qr_box="("+this._data.left+","+this._data.top+")",this._data.creatactivitydata.qr_size="("+this._data.width+","+this._data.height+")",this.$axios.post("https://wx.upctech.com.cn/wx/event/market_event_temp/create/",this._data.creatactivitydata).then(function(e){t.$message("创建成功"),window.location.reload()}))},uploads:function(t){var e=this,a=t.target.files[0];this.imgUrl=URL.createObjectURL(a);var r=new FormData;r.append("image",a),this.$http.post("https://wx.upctech.com.cn/wx/img/image/upload/",r).then(function(t){e._data.creatactivitydata.post_url=t.data.img_name,e.$message("上传成功")}).catch(function(t){console.log(t)})},formatSex:function(t,e,a){return!0===a?"进行中":!1===a?"已结束":void 0},callobject:function(t,e,a){return"MT"===a?"会员推广":"ME"===a?"用户推广":"MA"===a?"代理推广":void 0},handleClick:function(t){var e=this;this.$axios.get("https://wx.upctech.com.cn/wx/event/market_event_temp/delete?event_id="+t.id).then(function(t){"done"==t.data.erro?(e.$message("删除成功"),window.location.reload()):e.$message.error("删除失败")})}}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"pagetitle"},[t._v("官方活动")]),t._v(" "),a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.createactivity()}}},[t._v("添加")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"活动id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"活动名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_on",label:"创建日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"活动介绍"}}),t._v(" "),a("el-table-column",{attrs:{prop:"modified_on",label:"修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"scene_str",label:"活动key"}}),t._v(" "),a("el-table-column",{attrs:{prop:"image",label:"活动海报",width:"300"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"head_pic",attrs:{src:"https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/"+t.row.post_url,width:"40",height:"40"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"qr_url",label:"活动二维码",width:"300"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"head_pic",attrs:{src:t.row.qr_url,width:"40",height:"40"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modified_on",label:"修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"event_type",label:"活动对象",width:"120",formatter:t.callobject}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_active",label:"活动状态",width:"120",formatter:t.formatSex}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row)}}},[t._v("删除活动")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"创建活动",visible:t.createactivityoperate},on:{"update:visible":function(e){t.createactivityoperate=e}}},[a("el-form",{attrs:{model:t.creatactivitydata}},[a("el-form-item",{attrs:{label:"活动名称","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.creatactivitydata.name,callback:function(e){t.$set(t.creatactivitydata,"name",e)},expression:"creatactivitydata.name"}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"图片位置","label-width":t.formLabelWidth}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"向上偏移量"},model:{value:t.top,callback:function(e){t.top=e},expression:"top"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"向左偏移量"},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"二维码图片大小","label-width":t.formLabelWidth}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"宽度"},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"高度"},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动介绍","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.creatactivitydata.description,callback:function(e){t.$set(t.creatactivitydata,"description",e)},expression:"creatactivitydata.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动对象","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动对象"},model:{value:t.creatactivitydata.event_type,callback:function(e){t.$set(t.creatactivitydata,"event_type",e)},expression:"creatactivitydata.event_type"}},[a("el-option",{attrs:{label:"用户",value:"ME"}}),t._v(" "),a("el-option",{attrs:{label:"技师",value:"MT"}}),t._v(" "),a("el-option",{attrs:{label:"代理",value:"MA"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动海报","label-width":t.formLabelWidth}},[a("div",[a("input",{attrs:{type:"file"},on:{change:t.uploads}}),t._v(" "),a("p"),t._v(" "),a("img",{staticClass:"Posterpictures",attrs:{src:t.imgUrl}})])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.createactivityoperate=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createactivities()}}},[t._v("确 定")])],1)],1)],1)};l._withStripped=!0;var n={render:l,staticRenderFns:[]},i=n;var o=!1;var c=a("VU/8")(r,i,!1,function(t){o||a("Majt")},null,null);c.options.__file="src/views/admin/official-activities.vue";e.default=c.exports},Majt:function(t,e,a){var r=a("3Xu3");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("29a0c64e",r,!1,{})}});
//# sourceMappingURL=16.f880d30e64b7d9b69ae5.js.map