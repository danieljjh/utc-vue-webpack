webpackJsonp([12],{"9wNf":function(t,e,r){var n=r("S3BG");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("125883a3",n,!1,{})},S3BG:function(t,e,r){(t.exports=r("FZ+f")(!0)).push([t.i,"\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\n}\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\n}\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\n}\n.Posterpictures {\r\n  width: 18%;\n}\r\n","",{version:3,sources:["D:/my-vue-webpack/utc-vue-webpack/src/views/admin/src/views/admin/official-account.vue"],names:[],mappings:";AAsMA;EACA,aAAA;EACA,wBAAA;CACA;AACA;EACA,2BAAA;EACA,mBAAA;EACA,gBAAA;EACA,mBAAA;EACA,iBAAA;CACA;AACA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;EACA,aAAA;EACA,cAAA;EACA,mBAAA;EACA,mBAAA;CACA;AACA;EACA,aAAA;EACA,cAAA;EACA,eAAA;CACA;AACA;EACA,WAAA;CACA",file:"official-account.vue",sourcesContent:['<template>\r\n  <div>\r\n    \x3c!-- 表格显示 --\x3e\r\n    <div class="pagetitle">用户活动</div>\r\n    <el-table :data="tableData" border style="width: 100%">\r\n      <el-table-column prop="type" label="文章类型" width="120" :formatter="callobject"></el-table-column>\r\n      <el-table-column prop="action" label="文章行为" width="120" :formatter="callobject2"></el-table-column>\r\n\r\n      <el-table-column prop="created_on" label="创建日期"></el-table-column>\r\n\r\n      <el-table-column label="操作" width="300">\r\n        <template slot-scope="scope">\r\n          <el-button @click="modifyactivity(scope.row)" type="text" size="small">详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \x3c!-- 修改活动 --\x3e\r\n    <el-dialog title="修改文章" :visible.sync="createactivityoperate2">\r\n      <el-form v-show="modifydata.details" v-for="(item,index) in modifydata.details" :key="index">\r\n        <el-row>\r\n          <el-col :span="2">\r\n            <el-input\r\n              v-model="item.order"\r\n              placeholder="文章ID"\r\n              @input="inputFunction(index)"\r\n              id="myInput"\r\n            ></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="item.title" placeholder="文章名称"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="item.description" placeholder="文章介绍"></el-input>\r\n          </el-col>\r\n          <el-col :span="5" v-if="modifydata.type != \'agent\'">\r\n            <el-select v-model="item.url">\r\n              <el-option\r\n                v-for="(items,index) in articlelist"\r\n                :label="items.title"\r\n                :value="items.news_id"\r\n                :key="index"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-col>\r\n          <el-col :span="5" v-if="modifydata.type === \'agent\'">\r\n            <el-input v-model="item.url" placeholder="文章链接"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <div>\r\n              <input type="file" @change="uploads" />\r\n              <p></p>\r\n              <img :src="item.picurl" class="Posterpictures" />\r\n            </div>\r\n          </el-col>\r\n          \x3c!-- <el-col :span="2">\r\n            <el-button @click="handleClick(index)" type="text" size="small">删除</el-button>\r\n          </el-col>--\x3e\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <div slot="footer" class="dialog-footer">\r\n        <el-button type="warning" @click="add() ">添加文章</el-button>\r\n        <el-button @click="createactivityoperate2 = false">取 消</el-button>\r\n        <el-button type="primary" @click="createactivities2()">修改文章</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      indexs: "",\r\n      articlelist: [],\r\n      createactivityoperate2: false,\r\n      formLabelWidth: "160px",\r\n      tableData: [],\r\n      modifydata: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    var _that = this;\r\n    this.$axios\r\n      .get("https://wx.upctech.com.cn/wx/event/choose_template/all_article")\r\n      .then(res => {\r\n        this._data.tableData = res.data.articles;\r\n      });\r\n    this.$axios\r\n      .get("https://wx.upctech.com.cn/wx/event/choose_template/all_content")\r\n      .then(res => {\r\n        this._data.articlelist = res.data.article_list;\r\n      });\r\n  },\r\n  methods: {\r\n    inputFunction(index) {\r\n      this._data.indexs = index;\r\n    },\r\n    add() {\r\n      this._data.modifydata.details.push({\r\n        url: "",\r\n        order: "",\r\n        title: "",\r\n        description: "",\r\n        picurl: ""\r\n      });\r\n      console.log();\r\n    },\r\n    modifyactivity(e) {\r\n      this._data.createactivityoperate2 = true;\r\n      this._data.modifydata = e;\r\n    },\r\n    createactivities2() {\r\n      this._data.createactivityoperate2 = false;\r\n      var data = this._data.modifydata;\r\n      if (this._data.modifydata.type != "agent") {\r\n        for (var i = 0; i < data.details.length; i++) {\r\n          data.details[i].url =\r\n            "wx.upctech.com.cn/" +\r\n            data.type +\r\n            "/news-information?news_id=" +\r\n            data.details[i].url;\r\n        }\r\n      }\r\n\r\n      console.log("data", data);\r\n\r\n      // this.$axios\r\n      //   .post(\r\n      //     "http://wx.upctech.com.cn/wx/event/choose_template/update_article/",\r\n      //     data\r\n      //   )\r\n      //   .then(res => {\r\n      //     console.log(res);\r\n      //     this.$message("修改成功");\r\n      //     // window.location.reload();\r\n      //   });\r\n    },\r\n    uploads(e) {\r\n      var _that = this;\r\n      const file = e.target.files[0]; //获取到当前文件对象\r\n      this.imgUrl = URL.createObjectURL(file); // 这是为了显示图片而已， 与上传没有关系（可选）\r\n\r\n      // 传递一个 FormData 对象 即可\r\n      let formData = new FormData();\r\n      formData.append("image", file); // \'file\' 可变 相当于 input 表单的name 属性\r\n      // 服务器只需按照正常的上传程序代码即可\r\n      this.$http\r\n        .post("https://wx.upctech.com.cn/wx/img/image/upload/", formData)\r\n        .then(rs => {\r\n          console.log(this._data.indexs);\r\n          this._data.modifydata.details[this._data.indexs].picurl =\r\n            rs.data.img_url;\r\n\r\n          this.$message("上传成功");\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    callobject(row, column, cellValue) {\r\n      if (cellValue === "worker") {\r\n        return "技师";\r\n      } else if (cellValue === "member") {\r\n        return "用户";\r\n      } else {\r\n        return "代理";\r\n      }\r\n    },\r\n    callobject2(row, column, cellValue) {\r\n      if (cellValue === "subscribe") {\r\n        return "订阅";\r\n      } else {\r\n        return "扫描";\r\n      }\r\n    },\r\n    handleClick(e) {\r\n      console.log(e);\r\n      var _that = this;\r\n      _that._data.modifydata.details.splice(e, 1);\r\n\r\n      _that.$axios\r\n        .get(\r\n          "https://wx.upctech.com.cn/wx/event/choose_template/delete_article/?id=" +\r\n            e.id\r\n        )\r\n        .then(res => {\r\n          if (res.data.erro == "done") {\r\n            this.$message("删除成功");\r\n            //window.location.reload();\r\n          } else {\r\n            this.$message.error("删除失败");\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n<\/script>\r\n<style>\r\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n.Posterpictures {\r\n  width: 18%;\r\n}\r\n</style>'],sourceRoot:""}])},qK1b:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{indexs:"",articlelist:[],createactivityoperate2:!1,formLabelWidth:"160px",tableData:[],modifydata:{}}},mounted:function(){var t=this;this.$axios.get("https://wx.upctech.com.cn/wx/event/choose_template/all_article").then(function(e){t._data.tableData=e.data.articles}),this.$axios.get("https://wx.upctech.com.cn/wx/event/choose_template/all_content").then(function(e){t._data.articlelist=e.data.article_list})},methods:{inputFunction:function(t){this._data.indexs=t},add:function(){this._data.modifydata.details.push({url:"",order:"",title:"",description:"",picurl:""}),console.log()},modifyactivity:function(t){this._data.createactivityoperate2=!0,this._data.modifydata=t},createactivities2:function(){this._data.createactivityoperate2=!1;var t=this._data.modifydata;if("agent"!=this._data.modifydata.type)for(var e=0;e<t.details.length;e++)t.details[e].url="wx.upctech.com.cn/"+t.type+"/news-information?news_id="+t.details[e].url;console.log("data",t)},uploads:function(t){var e=this,r=t.target.files[0];this.imgUrl=URL.createObjectURL(r);var n=new FormData;n.append("image",r),this.$http.post("https://wx.upctech.com.cn/wx/img/image/upload/",n).then(function(t){console.log(e._data.indexs),e._data.modifydata.details[e._data.indexs].picurl=t.data.img_url,e.$message("上传成功")}).catch(function(t){console.log(t)})},callobject:function(t,e,r){return"worker"===r?"技师":"member"===r?"用户":"代理"},callobject2:function(t,e,r){return"subscribe"===r?"订阅":"扫描"},handleClick:function(t){var e=this;console.log(t);this._data.modifydata.details.splice(t,1),this.$axios.get("https://wx.upctech.com.cn/wx/event/choose_template/delete_article/?id="+t.id).then(function(t){"done"==t.data.erro?e.$message("删除成功"):e.$message.error("删除失败")})}}},a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"pagetitle"},[t._v("用户活动")]),t._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[r("el-table-column",{attrs:{prop:"type",label:"文章类型",width:"120",formatter:t.callobject}}),t._v(" "),r("el-table-column",{attrs:{prop:"action",label:"文章行为",width:"120",formatter:t.callobject2}}),t._v(" "),r("el-table-column",{attrs:{prop:"created_on",label:"创建日期"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){t.modifyactivity(e.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),r("el-dialog",{attrs:{title:"修改文章",visible:t.createactivityoperate2},on:{"update:visible":function(e){t.createactivityoperate2=e}}},[t._l(t.modifydata.details,function(e,n){return r("el-form",{directives:[{name:"show",rawName:"v-show",value:t.modifydata.details,expression:"modifydata.details"}],key:n},[r("el-row",[r("el-col",{attrs:{span:2}},[r("el-input",{attrs:{placeholder:"文章ID",id:"myInput"},on:{input:function(e){t.inputFunction(n)}},model:{value:e.order,callback:function(r){t.$set(e,"order",r)},expression:"item.order"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"文章名称"},model:{value:e.title,callback:function(r){t.$set(e,"title",r)},expression:"item.title"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"文章介绍"},model:{value:e.description,callback:function(r){t.$set(e,"description",r)},expression:"item.description"}})],1),t._v(" "),"agent"!=t.modifydata.type?r("el-col",{attrs:{span:5}},[r("el-select",{model:{value:e.url,callback:function(r){t.$set(e,"url",r)},expression:"item.url"}},t._l(t.articlelist,function(t,e){return r("el-option",{key:e,attrs:{label:t.title,value:t.news_id}})}))],1):t._e(),t._v(" "),"agent"===t.modifydata.type?r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"文章链接"},model:{value:e.url,callback:function(r){t.$set(e,"url",r)},expression:"item.url"}})],1):t._e(),t._v(" "),r("el-col",{attrs:{span:5}},[r("div",[r("input",{attrs:{type:"file"},on:{change:t.uploads}}),t._v(" "),r("p"),t._v(" "),r("img",{staticClass:"Posterpictures",attrs:{src:e.picurl}})])])],1)],1)}),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"warning"},on:{click:function(e){t.add()}}},[t._v("添加文章")]),t._v(" "),r("el-button",{on:{click:function(e){t.createactivityoperate2=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createactivities2()}}},[t._v("修改文章")])],1)],2)],1)};a._withStripped=!0;var l={render:a,staticRenderFns:[]},i=l;var o=!1;var c=r("VU/8")(n,i,!1,function(t){o||r("9wNf")},null,null);c.options.__file="src/views/admin/official-account.vue";e.default=c.exports}});
//# sourceMappingURL=12.e9b5cd536046ea0e82c4.js.map