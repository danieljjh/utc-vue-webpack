webpackJsonp([13],{Ycbh:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{imgUrl:{qr_box:"",qr_size:"",post_url:""},imgUrl2:{qr_box:"",qr_size:"",post_url:""},imgUrl3:{qr_box:"",qr_size:"",post_url:""},dialogFormVisible:!1,createactivityoperate:!1,formLabelWidth:"160px",tableData:[],creatactivitydata:{qr_parameters:[],qr_action_name:"QR_STR_SCENE",qr_expire_days:"30",name:"",event_type:"",description:"",points:"",coupon_class_id:"",usr_points:"",usr_coupon_class_id:""}}},mounted:function(){var t=this;this.$axios.get("https://wx.upctech.com.cn/wx/event/user_event_temp/list/").then(function(e){t._data.tableData=e.data})},methods:{createactivity:function(){this._data.createactivityoperate=!0},createactivities:function(){var t=this;console.log(this._data.creatactivitydata),""==this._data.creatactivitydata.name?this.$message.error("没有填写活动名称"):""==this._data.creatactivitydata.event_type?this.$message.error("没有填写活动对象"):""==this._data.creatactivitydata.description?this.$message.error("没有填写活动内容"):""==this._data.creatactivitydata.points||""==this._data.creatactivitydata.usr_points?this.$message.error("抱歉没有选择积分"):""==this._data.creatactivitydata.coupon_class_id||""==this._data.creatactivitydata.usr_coupon_class_id?this.$message.error("请输入优惠劵id"):""==this._data.creatactivitydata.qr_expire_days?this.$message.error("没有填写活动时间"):""==this._data.imgUrl.post_url?this.$message.error("没有选活动海报"):(this._data.createactivityoperate=!1,""!=this._data.imgUrl.post_url&&this._data.creatactivitydata.qr_parameters.push(this._data.imgUrl),""!=this._data.imgUrl2.post_url&&this._data.creatactivitydata.qr_parameters.push(this._data.imgUrl2),""!=this._data.imgUrl3.post_url&&this._data.creatactivitydata.qr_parameters.push(this._data.imgUrl3),parseInt,"WW"==this._data.creatactivitydata.event_type?this._data.creatactivitydata.app_id="wx2c2a216f6d6e765c":this._data.creatactivitydata.app_id="wxb4e2ec03cee28c82",this.$axios.post("https://wx.upctech.com.cn/wx/event/user_event_temp/create/",this._data.creatactivitydata).then(function(e){t.$message("创建成功"),window.location.reload()}))},uploads:function(t){var e=this,r=t.target.files[0],a=new FormData;a.append("image",r),this.$http.post("https://wx.upctech.com.cn/wx/img/image/upload/",a).then(function(t){e._data.imgUrl.post_url=t.data.img_name,e.$message("上传成功")}).catch(function(t){console.log(t)})},uploads2:function(t){var e=this,r=t.target.files[0],a=new FormData;a.append("image",r),this.$http.post("https://wx.upctech.com.cn/wx/img/image/upload/",a).then(function(t){e._data.imgUrl2.post_url=t.data.img_name,console.log(imgUrl2),e.$message("上传成功")}).catch(function(t){console.log(t)})},uploads3:function(t){var e=this,r=t.target.files[0],a=new FormData;a.append("image",r),this.$http.post("https://wx.upctech.com.cn/wx/img/image/upload/",a).then(function(t){e._data.imgUrl3.post_url=t.data.img_name,console.log(imgUrl3),e.$message("上传成功")}).catch(function(t){console.log(t)})},callobject:function(t){return"MM"===t?"用户对用户":"WM"===t?"技师对用户":"WW"===t?"技师对技师 ":void 0},handleClick:function(t){var e=this;this.$axios.get("https://wx.upctech.com.cn/wx/event/user_event_temp/delete?event_id="+this._data.tableData[t].id).then(function(t){"done"==t.data.erro?(e.$message("删除成功"),window.location.reload()):e.$message.error("删除失败")})}}},n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"pagetitle"},[t._v("用户活动")]),t._v(" "),r("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.createactivity()}}},[t._v("添加")]),t._v(" "),r("table",{staticClass:"fl-table"},[t._m(0),t._v(" "),t._l(t.tableData,function(e){return r("tbody",t._l(e.qr_parameters,function(a,n){return r("tr",[n?t._e():r("td",{attrs:{rowspan:e.qr_parameters.length}},[t._v(t._s(e.id))]),t._v(" "),n?t._e():r("td",{attrs:{rowspan:e.qr_parameters.length}},[t._v(t._s(e.name))]),t._v(" "),n?t._e():r("td",{attrs:{rowspan:e.qr_parameters.length}},[t._v(t._s(e.description))]),t._v(" "),r("td",[r("img",{staticClass:"head_pic",attrs:{src:"https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/"+a.post_url,width:"40",height:"40"}})]),t._v(" "),n?t._e():r("td",{attrs:{rowspan:e.qr_parameters.length},domProps:{textContent:t._s(t.callobject(e.event_type))}}),t._v(" "),n?t._e():r("td",{attrs:{rowspan:e.qr_parameters.length}},[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.handleClick(n)}}},[t._v("删除活动")])],1)])}))})],2),t._v(" "),r("el-dialog",{attrs:{title:"创建活动",visible:t.createactivityoperate},on:{"update:visible":function(e){t.createactivityoperate=e}}},[r("el-form",{attrs:{model:t.creatactivitydata}},[r("el-form-item",{attrs:{label:"活动名称","label-width":t.formLabelWidth}},[r("el-input",{model:{value:t.creatactivitydata.name,callback:function(e){t.$set(t.creatactivitydata,"name",e)},expression:"creatactivitydata.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"分享人所得积分","label-width":t.formLabelWidth}},[r("el-input",{model:{value:t.creatactivitydata.points,callback:function(e){t.$set(t.creatactivitydata,"points",e)},expression:"creatactivitydata.points"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"优惠劵id","label-width":t.formLabelWidth}},[r("el-input",{model:{value:t.creatactivitydata.coupon_class_id,callback:function(e){t.$set(t.creatactivitydata,"coupon_class_id",e)},expression:"creatactivitydata.coupon_class_id"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"被分享人所得积分","label-width":t.formLabelWidth}},[r("el-input",{model:{value:t.creatactivitydata.usr_points,callback:function(e){t.$set(t.creatactivitydata,"usr_points",e)},expression:"creatactivitydata.usr_points"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"被分享人所得优惠劵id","label-width":t.formLabelWidth}},[r("el-input",{model:{value:t.creatactivitydata.usr_coupon_class_id,callback:function(e){t.$set(t.creatactivitydata,"usr_coupon_class_id",e)},expression:"creatactivitydata.usr_coupon_class_id"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"活动时间","label-width":t.formLabelWidth}},[r("el-input",{model:{value:t.creatactivitydata.qr_expire_days,callback:function(e){t.$set(t.creatactivitydata,"qr_expire_days",e)},expression:"creatactivitydata.qr_expire_days"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"活动时间","label-width":t.formLabelWidth}},[r("el-input",{attrs:{readonly:"readonly"},model:{value:t.creatactivitydata.qr_action_name,callback:function(e){t.$set(t.creatactivitydata,"qr_action_name",e)},expression:"creatactivitydata.qr_action_name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"活动介绍","label-width":t.formLabelWidth}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.creatactivitydata.description,callback:function(e){t.$set(t.creatactivitydata,"description",e)},expression:"creatactivitydata.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"活动对象","label-width":t.formLabelWidth}},[r("el-select",{attrs:{placeholder:"请选择活动对象"},model:{value:t.creatactivitydata.event_type,callback:function(e){t.$set(t.creatactivitydata,"event_type",e)},expression:"creatactivitydata.event_type"}},[r("el-option",{attrs:{label:"用户对用户",value:"MM"}}),t._v(" "),r("el-option",{attrs:{label:"技师对用户",value:"WM"}}),t._v(" "),r("el-option",{attrs:{label:"技师对技师",value:"WW"}})],1)],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"活动海报","label-width":t.formLabelWidth}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"(左移量,上移量)"},model:{value:t.imgUrl.qr_box,callback:function(e){t.$set(t.imgUrl,"qr_box",e)},expression:"imgUrl.qr_box"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"(宽,高)"},model:{value:t.imgUrl.qr_size,callback:function(e){t.$set(t.imgUrl,"qr_size",e)},expression:"imgUrl.qr_size"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("div",[r("input",{attrs:{type:"file"},on:{change:t.uploads}}),t._v(" "),r("p"),t._v(" "),r("img",{staticClass:"Posterpictures",attrs:{src:"https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/"+t.imgUrl.post_url}})])])],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"活动海报","label-width":t.formLabelWidth}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"(左移量,上移量)"},model:{value:t.imgUrl2.qr_box,callback:function(e){t.$set(t.imgUrl2,"qr_box",e)},expression:"imgUrl2.qr_box"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"(宽,高)"},model:{value:t.imgUrl2.qr_size,callback:function(e){t.$set(t.imgUrl2,"qr_size",e)},expression:"imgUrl2.qr_size"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("div",[r("input",{attrs:{type:"file"},on:{change:t.uploads2}}),t._v(" "),r("p"),t._v(" "),r("img",{staticClass:"Posterpictures",attrs:{src:"https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/"+t.imgUrl2.post_url}})])])],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"活动海报","label-width":t.formLabelWidth}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"(左移量,上移量)"},model:{value:t.imgUrl3.qr_box,callback:function(e){t.$set(t.imgUrl3,"qr_box",e)},expression:"imgUrl3.qr_box"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"(宽,高)"},model:{value:t.imgUrl3.qr_size,callback:function(e){t.$set(t.imgUrl3,"qr_size",e)},expression:"imgUrl3.qr_size"}})],1),t._v(" "),r("el-col",{attrs:{span:5}},[r("div",[r("input",{attrs:{type:"file"},on:{change:t.uploads3}}),t._v(" "),r("p"),t._v(" "),r("img",{staticClass:"Posterpictures",attrs:{src:"https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/"+t.imgUrl3.post_url}})])])],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.createactivityoperate=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createactivities()}}},[t._v("确 定")])],1)],1)],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("活动id")]),t._v(" "),r("th",[t._v("活动名")]),t._v(" "),r("th",[t._v("活动介绍")]),t._v(" "),r("th",[t._v("活动海报")]),t._v(" "),r("th",[t._v("活动对象")]),t._v(" "),r("th",[t._v("操作")])])])}]},l=i;var o=!1;var s=r("VU/8")(a,l,!1,function(t){o||r("sCdj")},null,null);s.options.__file="src/views/admin/sharing-activities.vue";e.default=s.exports},sCdj:function(t,e,r){var a=r("vguQ");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("6b5cfa4e",a,!1,{})},vguQ:function(t,e,r){(t.exports=r("FZ+f")(!0)).push([t.i,"\n.head_pic {\r\n  display: inline;\n}\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\n}\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\n}\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\n}\n.Posterpictures {\r\n  width: 100%;\n}\n.table-wrapper {\r\n  margin: 10px 70px 70px;\r\n  -webkit-box-shadow: 0px 35px 50px rgba(0, 0, 0, 0.2);\r\n          box-shadow: 0px 35px 50px rgba(0, 0, 0, 0.2);\n}\n.fl-table {\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  font-weight: normal;\r\n  border: none;\r\n  border-collapse: collapse;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  background-color: white;\n}\n.fl-table td,\r\n.fl-table th {\r\n  text-align: center;\r\n  padding: 8px;\n}\n.fl-table td {\r\n  font-size: 12px;\r\n  border: 1px solid #909399;\n}\n.fl-table thead th {\r\n  color: #ffffff;\r\n  background: #4fc3a1;\n}\n.fl-table thead th:nth-child(odd) {\r\n  color: #ffffff;\r\n  background: #324960;\n}\n.fl-table tr:nth-child(even) {\r\n  background: #f8f8f8;\n}\r\n","",{version:3,sources:["D:/my-vue-webpack/utc-vue-webpack/src/views/admin/src/views/admin/sharing-activities.vue"],names:[],mappings:";AAwWA;EACA,gBAAA;CACA;AAEA;EACA,aAAA;EACA,wBAAA;CACA;AACA;EACA,2BAAA;EACA,mBAAA;EACA,gBAAA;EACA,mBAAA;EACA,iBAAA;CACA;AACA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;EACA,aAAA;EACA,cAAA;EACA,mBAAA;EACA,mBAAA;CACA;AACA;EACA,aAAA;EACA,cAAA;EACA,eAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,uBAAA;EACA,qDAAA;UAAA,6CAAA;CACA;AAEA;EACA,mBAAA;EACA,gBAAA;EACA,oBAAA;EACA,aAAA;EACA,0BAAA;EACA,YAAA;EACA,gBAAA;EACA,oBAAA;EACA,wBAAA;CACA;AAEA;;EAEA,mBAAA;EACA,aAAA;CACA;AAEA;EACA,gBAAA;EACA,0BAAA;CACA;AAEA;EACA,eAAA;EACA,oBAAA;CACA;AAEA;EACA,eAAA;EACA,oBAAA;CACA;AAEA;EACA,oBAAA;CACA",file:"sharing-activities.vue",sourcesContent:['<template>\r\n  <div>\r\n    \x3c!-- 表格显示 --\x3e\r\n    <div class="pagetitle">用户活动</div>\r\n\r\n    <el-button type="primary" @click="createactivity() " class="add">添加</el-button>\r\n    <table class="fl-table">\r\n      <thead>\r\n        <tr>\r\n          <th>活动id</th>\r\n          <th>活动名</th>\r\n          <th>活动介绍</th>\r\n          <th>活动海报</th>\r\n          <th>活动对象</th>\r\n          <th>操作</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody v-for="item1 in tableData">\r\n        <tr v-for="(item2,index) in item1.qr_parameters">\r\n          <td v-if="!index" :rowspan="item1.qr_parameters.length">{{item1.id}}</td>\r\n          <td v-if="!index" :rowspan="item1.qr_parameters.length">{{item1.name}}</td>\r\n          <td v-if="!index" :rowspan="item1.qr_parameters.length">{{item1.description}}</td>\r\n          <td>\r\n            <img\r\n              :src="\'https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/\'+item2.post_url"\r\n              width="40"\r\n              height="40"\r\n              class="head_pic"\r\n            />\r\n          </td>\r\n\r\n          <td\r\n            v-if="!index"\r\n            :rowspan="item1.qr_parameters.length"\r\n            v-text="callobject(item1.event_type)"\r\n          ></td>\r\n          <td v-if="!index" :rowspan="item1.qr_parameters.length">\r\n            <el-button @click="handleClick(index)" type="text" size="small">删除活动</el-button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    \x3c!-- <el-table :data="tableData" border style="width: 100%" :key="index">\r\n      <el-table-column prop="id" label="活动id"></el-table-column>\r\n      <el-table-column prop="name" label="活动名"></el-table-column>\r\n      <el-table-column prop="created_on" label="创建日期"></el-table-column>\r\n      <el-table-column prop="description" label="活动介绍"></el-table-column>\r\n      <el-table-column prop="modified_on" label="修改时间"></el-table-column>\r\n      <el-table-column prop="qr_action_name" label="活动名称"></el-table-column>\r\n      <template v-for="(items, index) in tableData[index].qr_parameters">\r\n        <el-table-column prop="items.post_url" label="活动海报" width="300" :key="index">\r\n          <template slot-scope="scope">\r\n            <img\r\n              :src="\'https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/\'+scope.row.post_url"\r\n              width="40"\r\n              height="40"\r\n              class="head_pic"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n      </template>\r\n    \r\n      <el-table-column prop="event_type" label="活动对象" width="120" :formatter="callobject"></el-table-column>\r\n      <el-table-column label="操作" width="300">\r\n        <template slot-scope="scope">\r\n         \r\n        </template>\r\n      </el-table-column>\r\n    </el-table>--\x3e\r\n\r\n    \x3c!-- 创建活动 --\x3e\r\n    <el-dialog title="创建活动" :visible.sync="createactivityoperate">\r\n      <el-form :model="creatactivitydata">\r\n        <el-form-item label="活动名称" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.name"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="分享人所得积分" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.points"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label="优惠劵id" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.coupon_class_id"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="被分享人所得积分" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.usr_points"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="被分享人所得优惠劵id" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.usr_coupon_class_id"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="活动时间" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.qr_expire_days"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="活动时间" :label-width="formLabelWidth">\r\n          <el-input v-model="creatactivitydata.qr_action_name" readonly="readonly"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="活动介绍" :label-width="formLabelWidth">\r\n          <el-input\r\n            type="textarea"\r\n            :rows="2"\r\n            placeholder="请输入内容"\r\n            v-model="creatactivitydata.description"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label="活动对象" :label-width="formLabelWidth">\r\n          <el-select v-model="creatactivitydata.event_type" placeholder="请选择活动对象">\r\n            <el-option label="用户对用户" value="MM"></el-option>\r\n            <el-option label="技师对用户" value="WM"></el-option>\r\n            <el-option label="技师对技师" value="WW"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-row>\r\n          <el-col :span="4">\r\n            <el-form-item label="活动海报" :label-width="formLabelWidth"></el-form-item>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="imgUrl.qr_box" placeholder="(左移量,上移量)"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="imgUrl.qr_size" placeholder="(宽,高)"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <div>\r\n              <input type="file" @change="uploads" />\r\n              <p></p>\r\n              <img\r\n                :src="\'https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/\'+imgUrl.post_url"\r\n                class="Posterpictures"\r\n              />\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span="4">\r\n            <el-form-item label="活动海报" :label-width="formLabelWidth"></el-form-item>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="imgUrl2.qr_box" placeholder="(左移量,上移量)"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="imgUrl2.qr_size" placeholder="(宽,高)"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <div>\r\n              <input type="file" @change="uploads2" />\r\n              <p></p>\r\n              <img\r\n                :src="\'https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/\'+imgUrl2.post_url"\r\n                class="Posterpictures"\r\n              />\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span="4">\r\n            <el-form-item label="活动海报" :label-width="formLabelWidth"></el-form-item>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="imgUrl3.qr_box" placeholder="(左移量,上移量)"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <el-input v-model="imgUrl3.qr_size" placeholder="(宽,高)"></el-input>\r\n          </el-col>\r\n          <el-col :span="5">\r\n            <div>\r\n              <input type="file" @change="uploads3" />\r\n              <p></p>\r\n              <img\r\n                :src="\'https://s3.cn-northwest-1.amazonaws.com.cn/wechat-qr/\'+imgUrl3.post_url"\r\n                class="Posterpictures"\r\n              />\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot="footer" class="dialog-footer">\r\n        <el-button @click="createactivityoperate = false">取 消</el-button>\r\n        <el-button type="primary" @click="createactivities()">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgUrl: { qr_box: "", qr_size: "", post_url: "" },\r\n      imgUrl2: { qr_box: "", qr_size: "", post_url: "" },\r\n      imgUrl3: { qr_box: "", qr_size: "", post_url: "" },\r\n      dialogFormVisible: false,\r\n      createactivityoperate: false,\r\n      formLabelWidth: "160px",\r\n      tableData: [],\r\n      creatactivitydata: {\r\n        qr_parameters: [],\r\n        qr_action_name: "QR_STR_SCENE",\r\n        qr_expire_days: "30",\r\n        name: "",\r\n        event_type: "",\r\n        description: "",\r\n\r\n        points: "",\r\n        coupon_class_id: "",\r\n        usr_points: "",\r\n        usr_coupon_class_id: ""\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    var _that = this;\r\n    this.$axios\r\n      .get("https://wx.upctech.com.cn/wx/event/user_event_temp/list/")\r\n      .then(res => {\r\n        this._data.tableData = res.data;\r\n      });\r\n  },\r\n  methods: {\r\n    //显示创建活动模板\r\n    createactivity() {\r\n      this._data.createactivityoperate = true;\r\n    },\r\n    //创建活动\r\n    createactivities() {\r\n      var _that = this;\r\n      console.log(this._data.creatactivitydata);\r\n      if (this._data.creatactivitydata.name == "") {\r\n        this.$message.error("没有填写活动名称");\r\n      } else if (this._data.creatactivitydata.event_type == "") {\r\n        this.$message.error("没有填写活动对象");\r\n      } else if (this._data.creatactivitydata.description == "") {\r\n        this.$message.error("没有填写活动内容");\r\n      } else if (\r\n        this._data.creatactivitydata.points == "" ||\r\n        this._data.creatactivitydata.usr_points == ""\r\n      ) {\r\n        this.$message.error("抱歉没有选择积分");\r\n      } else if (\r\n        this._data.creatactivitydata.coupon_class_id == "" ||\r\n        this._data.creatactivitydata.usr_coupon_class_id == ""\r\n      ) {\r\n        this.$message.error("请输入优惠劵id");\r\n      } else if (this._data.creatactivitydata.qr_expire_days == "") {\r\n        this.$message.error("没有填写活动时间");\r\n      } else if (this._data.imgUrl.post_url == "") {\r\n        this.$message.error("没有选活动海报");\r\n      } else {\r\n        this._data.createactivityoperate = false;\r\n        if (this._data.imgUrl.post_url != "") {\r\n          this._data.creatactivitydata.qr_parameters.push(this._data.imgUrl);\r\n        }\r\n        if (this._data.imgUrl2.post_url != "") {\r\n          this._data.creatactivitydata.qr_parameters.push(this._data.imgUrl2);\r\n        }\r\n        if (this._data.imgUrl3.post_url != "") {\r\n          this._data.creatactivitydata.qr_parameters.push(this._data.imgUrl3);\r\n        }\r\n        parseInt;\r\n        if (this._data.creatactivitydata.event_type == "WW") {\r\n          this._data.creatactivitydata.app_id = "wx2c2a216f6d6e765c";\r\n        } else {\r\n          this._data.creatactivitydata.app_id = "wxb4e2ec03cee28c82";\r\n        }\r\n        this.$axios\r\n          .post(\r\n            "https://wx.upctech.com.cn/wx/event/user_event_temp/create/",\r\n            this._data.creatactivitydata\r\n          )\r\n          .then(res => {\r\n            this.$message("创建成功");\r\n            window.location.reload();\r\n          });\r\n      }\r\n    },\r\n    // 第一张上传\r\n    uploads(e) {\r\n      var _that = this;\r\n      const file = e.target.files[0]; //获取到当前文件对象\r\n      // 传递一个 FormData 对象 即可\r\n      let formData = new FormData();\r\n      formData.append("image", file); // \'file\' 可变 相当于 input 表单的name 属性\r\n      // 服务器只需按照正常的上传程序代码即可\r\n      this.$http\r\n        .post("https://wx.upctech.com.cn/wx/img/image/upload/", formData)\r\n        .then(rs => {\r\n          this._data.imgUrl.post_url = rs.data.img_name;\r\n\r\n          this.$message("上传成功");\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    uploads2(e) {\r\n      var _that = this;\r\n      const file = e.target.files[0]; //获取到当前文件对象\r\n\r\n      // 传递一个 FormData 对象 即可\r\n      let formData = new FormData();\r\n      formData.append("image", file); // \'file\' 可变 相当于 input 表单的name 属性\r\n      // 服务器只需按照正常的上传程序代码即可\r\n      this.$http\r\n        .post("https://wx.upctech.com.cn/wx/img/image/upload/", formData)\r\n        .then(rs => {\r\n          this._data.imgUrl2.post_url = rs.data.img_name;\r\n          console.log(imgUrl2);\r\n\r\n          this.$message("上传成功");\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    uploads3(e) {\r\n      var _that = this;\r\n      const file = e.target.files[0]; //获取到当前文件对象\r\n\r\n      // 传递一个 FormData 对象 即可\r\n      let formData = new FormData();\r\n      formData.append("image", file); // \'file\' 可变 相当于 input 表单的name 属性\r\n      // 服务器只需按照正常的上传程序代码即可\r\n      this.$http\r\n        .post("https://wx.upctech.com.cn/wx/img/image/upload/", formData)\r\n        .then(rs => {\r\n          this._data.imgUrl3.post_url = rs.data.img_name;\r\n          console.log(imgUrl3);\r\n\r\n          this.$message("上传成功");\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    callobject(cellValue) {\r\n      if (cellValue === "MM") {\r\n        return "用户对用户";\r\n      } else if (cellValue === "WM") {\r\n        return "技师对用户";\r\n      } else if (cellValue === "WW") {\r\n        return "技师对技师 ";\r\n      }\r\n    },\r\n    handleClick(index) {\r\n      var _that = this;\r\n      this.$axios\r\n        .get(\r\n          "https://wx.upctech.com.cn/wx/event/user_event_temp/delete?event_id=" +\r\n            this._data.tableData[index].id\r\n        )\r\n        .then(res => {\r\n          if (res.data.erro == "done") {\r\n            this.$message("删除成功");\r\n            window.location.reload();\r\n          } else {\r\n            this.$message.error("删除失败");\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n<\/script>\r\n<style>\r\n.head_pic {\r\n  display: inline;\r\n}\r\n\r\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n.Posterpictures {\r\n  width: 100%;\r\n}\r\n.table-wrapper {\r\n  margin: 10px 70px 70px;\r\n  box-shadow: 0px 35px 50px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.fl-table {\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  font-weight: normal;\r\n  border: none;\r\n  border-collapse: collapse;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n  background-color: white;\r\n}\r\n\r\n.fl-table td,\r\n.fl-table th {\r\n  text-align: center;\r\n  padding: 8px;\r\n}\r\n\r\n.fl-table td {\r\n  font-size: 12px;\r\n  border: 1px solid #909399;\r\n}\r\n\r\n.fl-table thead th {\r\n  color: #ffffff;\r\n  background: #4fc3a1;\r\n}\r\n\r\n.fl-table thead th:nth-child(odd) {\r\n  color: #ffffff;\r\n  background: #324960;\r\n}\r\n\r\n.fl-table tr:nth-child(even) {\r\n  background: #f8f8f8;\r\n}\r\n</style>'],sourceRoot:""}])}});
//# sourceMappingURL=13.690caa9b4b94341a4d25.js.map