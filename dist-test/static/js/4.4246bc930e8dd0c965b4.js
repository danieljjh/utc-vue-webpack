webpackJsonp([4],{"35vI":function(n,r){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAgCAYAAAAWl4iLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMwNjcgNzkuMTU3NzQ3LCAyMDE1LzAzLzMwLTIzOjQwOjQyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5RTI4RTE3OUMwRTIxMUU2ODczMkM3MEIyNDgxNzNDNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5RTI4RTE3QUMwRTIxMUU2ODczMkM3MEIyNDgxNzNDNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlFMjhFMTc3QzBFMjExRTY4NzMyQzcwQjI0ODE3M0M0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjlFMjhFMTc4QzBFMjExRTY4NzMyQzcwQjI0ODE3M0M0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+y8RRJwAAA15JREFUSEutlstPE1EUh39zp9OZTh8UAQHdoRQ1kY1uBYzRjStdyNqNC90pwURNjAtjNOofYOLGpRu3hmg0iIlGjYkxoviIIeGhbbWlnXaGaYvn3BZEOgNI+ZIh03PO/bhz7r3tKAsEfBj5UMTTTzbGZ+aRzFVkrC0qsLsziIEeA0f2hGTMC0/xndE53BjJwTQMhE0DwaCGgKrKXKlcxvy8C6tgo2DbGD4Sxam+mMwtp0588OYMUraGti1NUBQF8HsgyvHQ5K8sWg0XT4Y6a4kq/4h7r0whHI3BDJkkrD76migChWIBVm4O7y5vrwWXiQ/dnoVVMREOs9Rnln7Q7C2rgLAo4PHZDhkS/OfuWA4/rQAi4fD/Sxkaw2PZwS5Giq8/nEMr9XRhvY/vAY/ldWEXIx6NF6EbOoSghWoQhRzsekTbVPA+jZgb6KsX3BJyPZ2wIT7MuNC1QC3TOOxip0jly1ADstWbghpQwU5RkevVeH+Xw07RSme/XN74blgJu9gpEu0aXNethRuHXewU/QkD+WJRnp6GIQe7+rsNiKN7TeQse7N2m3Qd7TWrJ+/MQATpDJ0Y+kLZMDSWHafJxUjTucNNMGDDcWz6tJGWKHIsO4bIxSxNcex8JyZnM7SqJfr0P3JFjuGx7FhkSaypCl5daMfUbApuiXfJeuSKrJ36kZJj2bFI3S+I5VSw/+o02lpaoGkaRfxWlaS0tZLpNF5f3Iaw/u/61K0WF7y5tA2zyXStLd5wjmu4dqWUqY8QZlBgdLgD36dTntuQY5x7RjVc64V3lOiIBXDvZAsJkrTv/5bxPcc41041fviKmb5ECIP7QviV5T1OC0MX3w/uD8ncaqwqZq4db0bJsVCh9wm+XNvCtWPNtaw/a4qZm4PtSGVydFm4Nbi1Fl0dzzchJpX+jQw9tu04aDbKOH6/FZUFBQ9OJJFxVBi6jng8Rj/C3rOvE//OZDE+8Q1CFdACAWTncvj6eQJjmR65ow/EP6FrZwLxpigdjhK1p4LdiS40x6tHeZG6Vrz/+EW+q7FUDwYx9uItstY8duiT2BmclPfPX76VOa7hWh6zkjVnnMnm8PHzN+TzeZmPRCLY1d215ox9e8z/gNvgOC7KlTIdimoZvyiqQoWua2iKReuEVYA/CC+TbdZ+bt8AAAAASUVORK5CYII="},JB2O:function(n,r,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"map-list.vue",sourceRoot:""}])},KbGF:function(n,r,e){var t=e("JB2O");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);e("rjj0")("be38a170",t,!1,{})},"YW3/":function(n,r,e){var t=e("nLiJ");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);e("rjj0")("6fc7b33d",t,!1,{})},mvHQ:function(n,r,e){n.exports={default:e("qkKv"),__esModule:!0}},nLiJ:function(n,r,e){(n.exports=e("FZ+f")(!0)).push([n.i,'\n.map[data-v-6587b508] {\r\n  width: 100%;\r\n  height: 750px;\r\n  overflow: hidden;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  margin: 0;\r\n  font-family: "\\5FAE\\8F6F\\96C5\\9ED1";\n}\n.from[data-v-6587b508] {\r\n  width: 50%;\r\n  position: absolute;\r\n  margin: 60px auto;\r\n\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 10;\r\n  background: white;\n}\r\n',"",{version:3,sources:["D:/my-vue-webpack/utc-vue-webpack/src/components/src/components/map.vue"],names:[],mappings:";AAuZA;EACA,YAAA;EACA,cAAA;EACA,iBAAA;EACA,YAAA;EACA,aAAA;EACA,UAAA;EACA,oCAAA;CACA;AACA;EACA,WAAA;EACA,mBAAA;EACA,kBAAA;;EAEA,QAAA;EACA,SAAA;EACA,YAAA;EACA,kBAAA;CACA",file:"map.vue",sourcesContent:['<template>\r\n  <div>\r\n    <el-form label-width="80px" :ref="mapsd" :model="mapsd" v-show="flag" class="from">\r\n      <el-form-item label="区间ID">\r\n        <el-input v-model="mapsd.area_id"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label="价格等级">\r\n        <el-select placeholder="请选择价格等级" v-model="mapsd.level">\r\n          <el-option label="A" value="A"></el-option>\r\n          <el-option label="B" value="B"></el-option>\r\n          <el-option label="C" value="C"></el-option>\r\n          <el-option label="D" value="D"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label="地址">\r\n        <el-input v-model="mapsd.address"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label="地点">\r\n        <el-input v-model="mapsd.business"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label="附近建筑物">\r\n        <el-input v-model="mapsd.surrounds"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button type="primary" @click="fromtext">更新</el-button>\r\n        <el-button @click="qvxiao">取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div id="r-result">\r\n      请输入:\r\n      <input\r\n        type="text"\r\n        id="suggestId"\r\n        size="20"\r\n        name="address_detail"\r\n        v-model="address_detail"\r\n        style="width:150px;"\r\n      />\r\n    </div>\r\n\r\n    <div id="map" class="map"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import mapdetail from "@/assets/map"\r\n\r\nexport default {\r\n  name: "maps",\r\n  data() {\r\n    return {\r\n      list: [],\r\n      level: 13, //地图级别\r\n      initCenter: new BMap.Point(121.3056, 31.204803),\r\n      map: null,\r\n      xgrids: [], //经线\r\n      ygrids: [], //纬线\r\n      beSelectBounds: {},\r\n      bounds: null, //当前地图的四个顶点\r\n      span: null, //当前网格的跨度\r\n      mapAyy: [],\r\n      flag: false,\r\n      mapsd: {},\r\n      mapdetail: "",\r\n      address_detail: "", //详细地址\r\n      userlocation: { lng: "", lat: "" }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$axios.get("map/map_data").then(res => {\r\n      this.mapdetail = res.data;\r\n      console.log("shujv", this.mapdetail);\r\n      this.Zmap();\r\n    });\r\n  },\r\n  methods: {\r\n    ceshi() {\r\n      this.flag = false;\r\n    },\r\n    Zmap() {\r\n      let zmap = this;\r\n      this.map = new BMap.Map("map"); // 创建地图实例\r\n      // console.log(\'....\',this.map)\r\n      var point = new BMap.Point(121.481976, 31.226871); // 创建点坐标\r\n      this.map.centerAndZoom(point, 13); // 初始化地图，设置中心点坐标和地图级别\r\n\r\n      var marker = new BMap.Marker(new BMap.Point(121.481976, 31.226871)); // 创建标注\r\n      this.map.addOverlay(marker);\r\n      this.map.enableScrollWheelZoom(true);\r\n\r\n      for (let i = 0; i < zmap.mapdetail.length; i++) {\r\n        var marker = new BMap.Marker(\r\n          new BMap.Point(\r\n            zmap.mapdetail[i].cen_loc.lng,\r\n            zmap.mapdetail[i].cen_loc.lat\r\n          )\r\n        ); // 创建标注\r\n        this.map.addOverlay(marker);\r\n        var opts = {\r\n          position: new BMap.Point(\r\n            zmap.mapdetail[i].cen_loc.lng,\r\n            zmap.mapdetail[i].cen_loc.lat\r\n          ), // 指定文本标注所在的地理位置\r\n          offset: new BMap.Size(-50, 0) //设置文本偏移量\r\n        };\r\n        var label = new BMap.Label(\r\n          zmap.mapdetail[i].area_id +\r\n            " 等级:" +\r\n            zmap.mapdetail[i].level +\r\n            " 系数:" +\r\n            zmap.mapdetail[i].area_rate,\r\n          opts\r\n        ); // 创建文本标注对象\r\n        label.setStyle({\r\n          color: "red",\r\n          fontSize: "12px",\r\n          height: "20px",\r\n          lineHeight: "20px",\r\n          fontFamily: "微软雅黑",\r\n          width: "120px"\r\n        });\r\n        this.map.addOverlay(label);\r\n        label.addEventListener("click", function() {\r\n          // map.openInfoWindow(infoWindow,point);   //提示信息\r\n          console.log("00000", zmap.mapdetail[i].address);\r\n          zmap.mapsd = zmap.mapdetail[i];\r\n          zmap.flag = true;\r\n          console.log("xccc", this.flag);\r\n        });\r\n      }\r\n      this.initProperty();\r\n      this.initGrid();\r\n\r\n      //添加移动后的点击事件\r\n      this.map.addEventListener("dragend", function() {\r\n        zmap.initProperty();\r\n        zmap.initGrid();\r\n      });\r\n      //添加放大或缩小时的事件\r\n      this.map.addEventListener("zoomend", function() {\r\n        //   console.log("fun",this)\r\n        var string = JSON.stringify(zmap.mapAyy);\r\n        // console.log(\'string\',string)\r\n        // console.log("数据",zmap.mapAyy)\r\n        zmap.initProperty();\r\n        zmap.initGrid();\r\n      });\r\n      //设置点击事件\r\n      // this.map.addEventListener("click", function (e) {\r\n      //   var point = e.point;\r\n      //   //获取当前点是在哪个区块内,获取正方形的四个顶点\r\n      //   var points = zmap.getGrid(point);\r\n      //   // console.log("0000",points)\r\n      //   //判断当前区域是否已经被选中过，如果被选中过则取消选中\r\n      //   var key = \'\' + points[0].lng + points[0].lat + points[2].lng + points[2].lat;//使用两个点的坐标作为key\r\n      //   if (zmap.beSelectBounds[key]) {\r\n      //     this.map.removeOverlay(zmap.beSelectBounds[key]);\r\n      //     delete zmap.beSelectBounds[key];\r\n      //     return;\r\n      //   }\r\n      //   var polygon = new BMap.Polygon(points, {strokeColor: "red", strokeWeight: 2, strokeOpacity: 0.5});\r\n      //   zmap.map.addOverlay(polygon);\r\n      //   zmap.beSelectBounds[key] = polygon;\r\n      //\r\n      // });\r\n\r\n      var ac = new BMap.Autocomplete({\r\n        //建立一个自动完成的对象\r\n        input: "suggestId",\r\n        location: zmap.map\r\n      });\r\n      var myValue;\r\n      ac.addEventListener("onconfirm", function(e) {\r\n        //鼠标点击下拉列表后的事件\r\n        var _value = e.item.value;\r\n        myValue =\r\n          _value.province +\r\n          _value.city +\r\n          _value.district +\r\n          _value.street +\r\n          _value.business;\r\n        zmap.address_detail = myValue;\r\n\r\n        setPlace();\r\n      });\r\n\r\n      function setPlace() {\r\n        // zmap.map.clearOverlays();    //清除地图上所有覆盖物\r\n        function myFun() {\r\n          zmap.userlocation = local.getResults().getPoi(0).point; //获取第一个智能搜索的结果\r\n          console.log("poi", zmap.userlocation);\r\n          zmap.map.centerAndZoom(zmap.userlocation, 13);\r\n          var myIcon = new BMap.Icon(\r\n            require("../assets/images/marker.png"),\r\n            new BMap.Size(22, 32)\r\n          );\r\n          zmap.map.addOverlay(\r\n            new BMap.Marker(zmap.userlocation, { icon: myIcon })\r\n          ); //添加标注\r\n        }\r\n\r\n        var local = new BMap.LocalSearch(zmap.map, {\r\n          //智能搜索\r\n          onSearchComplete: myFun\r\n        });\r\n        console.log("myvalue", myValue);\r\n        local.search(myValue);\r\n\r\n        //测试输出坐标（指的是输入框最后确定地点的经纬度）\r\n        // zmap.map.addEventListener("click",function(e){\r\n        //   //经度\r\n        //   console.log(zmap.userlocation.lng);\r\n        //   //维度\r\n        //   console.log(zmap.userlocation.lat);\r\n        //\r\n        // })\r\n      }\r\n    },\r\n    initProperty: function() {\r\n      //初始化当前地图的状态\r\n      this.level = this.map.getZoom();\r\n      // console.log("map",this.map.getBounds().getSouthWest())\r\n      this.bounds = {\r\n        x1: this.map.getBounds().getSouthWest().lng,\r\n        y1: this.map.getBounds().getSouthWest().lat,\r\n        x2: this.map.getBounds().getNorthEast().lng,\r\n        y2: this.map.getBounds().getNorthEast().lat\r\n      };\r\n      // console.log("boundes",this.bounds)\r\n      this.span = this.getSpan(); //需要使用level属性\r\n    },\r\n    initGrid: function() {\r\n      //初始化网格\r\n      var zMap = this;\r\n      //将原来的网格线先去掉\r\n      for (var i in zMap.xgrids) {\r\n        this.map.removeOverlay(zMap.xgrids[i]);\r\n      }\r\n      zMap.xgrids = [];\r\n      for (var i in zMap.ygrids) {\r\n        this.map.removeOverlay(zMap.ygrids[i]);\r\n      }\r\n      zMap.ygrids = [];\r\n      //获取当前网格跨度\r\n      var span = zMap.span;\r\n      //初始化地图上的网格\r\n      // console.log("网格数据",zMap.bounds.x1)\r\n      // console.log("zMap.initCenter",span)\r\n      for (\r\n        var i =\r\n          zMap.bounds.x1 +\r\n          ((zMap.initCenter.lng - zMap.bounds.x1) % span.x) -\r\n          span.x;\r\n        i < zMap.bounds.x2 + span.x;\r\n        i += span.x\r\n      ) {\r\n        var polyline = new BMap.Polyline(\r\n          [\r\n            new BMap.Point(i.toFixed(6), zMap.bounds.y1),\r\n            new BMap.Point(i.toFixed(6), zMap.bounds.y2)\r\n          ],\r\n          { strokeColor: "black", strokeWeight: 1, strokeOpacity: 0.5 }\r\n        );\r\n        zMap.xgrids.push(polyline);\r\n        zMap.map.addOverlay(polyline);\r\n      }\r\n      for (\r\n        var i =\r\n          zMap.bounds.y1 +\r\n          ((zMap.initCenter.lat - zMap.bounds.y1) % span.y) -\r\n          span.y;\r\n        i < zMap.bounds.y2 + span.y;\r\n        i += span.y\r\n      ) {\r\n        var polyline = new BMap.Polyline(\r\n          [\r\n            new BMap.Point(zMap.bounds.x1, i.toFixed(6)),\r\n            new BMap.Point(zMap.bounds.x2, i.toFixed(6))\r\n          ],\r\n          { strokeColor: "black", strokeWeight: 1, strokeOpacity: 0.5 }\r\n        );\r\n        zMap.ygrids.push(polyline);\r\n        zMap.map.addOverlay(polyline);\r\n      }\r\n\r\n      console.log("网格数据", zMap.ygrids);\r\n    },\r\n    getSpan: function() {\r\n      //获取网格的跨度\r\n      var scale = 0.75;\r\n      var x = 0.0524;\r\n      var y = 0.04492;\r\n      //0.00064;\r\n      //\tfor (var i = this.level; i < 19; i++) {\r\n      //    x *= 2;\r\n      //}\r\n\r\n      //parseFloat((scale * x).toFixed(5));\r\n      return { x: x, y: y };\r\n    },\r\n    getGrid: function(point) {\r\n      //返回当前点在所在区块的四个顶点\r\n      var zMap = this;\r\n      //先找出两条纵线坐标\r\n      var xpoints = this.xgrids\r\n        .map(function(polyline) {\r\n          return polyline.getPath()[0].lng;\r\n        })\r\n        .filter(function(lng) {\r\n          return Math.abs(lng - point.lng) <= zMap.span.x;\r\n        })\r\n        .sort(function(a, b) {\r\n          return a - b;\r\n        })\r\n        .slice(0, 2);\r\n\r\n      //再找出两条横线的坐标\r\n      var ypoints = this.ygrids\r\n        .map(function(polyline) {\r\n          return polyline.getPath()[0].lat;\r\n        })\r\n        .filter(function(lat) {\r\n          return Math.abs(lat - point.lat) <= zMap.span.y;\r\n        })\r\n        .sort(function(a, b) {\r\n          return a - b;\r\n        })\r\n        .slice(0, 2);\r\n\r\n      //\tthis.map.centerAndZoom(new BMap.Point(xpoints[0], ypoints[0]), zMap.level);\r\n      // console.log("00011总",new BMap.Point(xpoints[0], ypoints[0]))\r\n      // console.log("00011",new BMap.Point(xpoints[0]+0.0262, ypoints[0]+0.02246))\r\n      var marker = new BMap.Marker(\r\n        new BMap.Point(xpoints[0] + 0.0262, ypoints[0] + 0.02246)\r\n      ); // 创建标注\r\n      this.map.addOverlay(marker);\r\n\r\n      return [\r\n        new BMap.Point(xpoints[0], ypoints[0]),\r\n        new BMap.Point(xpoints[0], ypoints[1]),\r\n        new BMap.Point(xpoints[1], ypoints[1]),\r\n        new BMap.Point(xpoints[1], ypoints[0])\r\n      ];\r\n    },\r\n    reset: function() {\r\n      //重置\r\n      this.map.reset();\r\n    },\r\n    ZPoint: function(x, y, code) {\r\n      this.code = code;\r\n      this.point = new BMap.Point(x, y);\r\n    },\r\n    fromtext() {\r\n      let _that = this;\r\n      let params = {};\r\n      params.id = this.mapsd.area_id;\r\n      params.level = this.mapsd.level;\r\n      console.log("ddd", params);\r\n      this.$axios.post(_that.$api + "/map/map_data", params).then(res => {\r\n        console.log("返回数据", res);\r\n        that.mapsd.area_rate = res.data.area_rate;\r\n\r\n        var opts = {\r\n          position: new BMap.Point(\r\n            that.mapsd.cen_loc.lng,\r\n            that.mapsd.cen_loc.lat\r\n          ), // 指定文本标注所在的地理位置\r\n          offset: new BMap.Size(-50, 0) //设置文本偏移量\r\n        };\r\n        var label = new BMap.Label(\r\n          that.mapsd.area_id +\r\n            " 等级" +\r\n            that.mapsd.level +\r\n            " 系数:" +\r\n            that.mapsd.area_rate,\r\n          opts\r\n        ); // 创建文本标注对象\r\n        label.setStyle({\r\n          color: "red",\r\n          fontSize: "12px",\r\n          height: "20px",\r\n          lineHeight: "20px",\r\n          fontFamily: "微软雅黑",\r\n          width: "120px"\r\n        });\r\n        this.map.addOverlay(label);\r\n        label.addEventListener("click", function() {\r\n          // map.openInfoWindow(infoWindow,point);   //提示信息\r\n          console.log("00000", that.mapsd);\r\n\r\n          that.flag = true;\r\n          // console.log("xccc",this.flag)\r\n        });\r\n        this.flag = false;\r\n      });\r\n    },\r\n    qvxiao() {\r\n      this.flag = false;\r\n    }\r\n  }\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n.map {\r\n  width: 100%;\r\n  height: 750px;\r\n  overflow: hidden;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  margin: 0;\r\n  font-family: "微软雅黑";\r\n}\r\n.from {\r\n  width: 50%;\r\n  position: absolute;\r\n  margin: 60px auto;\r\n\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 10;\r\n  background: white;\r\n}\r\n</style>\r\n'],sourceRoot:""}])},omzb:function(n,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e("mvHQ"),a=e.n(t),i={name:"maps",data:function(){return{list:[],level:13,initCenter:new BMap.Point(121.3056,31.204803),map:null,xgrids:[],ygrids:[],beSelectBounds:{},bounds:null,span:null,mapAyy:[],flag:!1,mapsd:{},mapdetail:"",address_detail:"",userlocation:{lng:"",lat:""}}},mounted:function(){var n=this;this.$axios.get("map/map_data").then(function(r){n.mapdetail=r.data,console.log("shujv",n.mapdetail),n.Zmap()})},methods:{ceshi:function(){this.flag=!1},Zmap:function(){var n=this,r=this;this.map=new BMap.Map("map");var t=new BMap.Point(121.481976,31.226871);this.map.centerAndZoom(t,13);var i,o=new BMap.Marker(new BMap.Point(121.481976,31.226871));this.map.addOverlay(o),this.map.enableScrollWheelZoom(!0);for(var s=function(e){o=new BMap.Marker(new BMap.Point(r.mapdetail[e].cen_loc.lng,r.mapdetail[e].cen_loc.lat)),n.map.addOverlay(o),p={position:new BMap.Point(r.mapdetail[e].cen_loc.lng,r.mapdetail[e].cen_loc.lat),offset:new BMap.Size(-50,0)},(d=new BMap.Label(r.mapdetail[e].area_id+" 等级:"+r.mapdetail[e].level+" 系数:"+r.mapdetail[e].area_rate,p)).setStyle({color:"red",fontSize:"12px",height:"20px",lineHeight:"20px",fontFamily:"微软雅黑",width:"120px"}),n.map.addOverlay(d),d.addEventListener("click",function(){console.log("00000",r.mapdetail[e].address),r.mapsd=r.mapdetail[e],r.flag=!0,console.log("xccc",this.flag)})},l=0;l<r.mapdetail.length;l++){var p,d;s(l)}this.initProperty(),this.initGrid(),this.map.addEventListener("dragend",function(){r.initProperty(),r.initGrid()}),this.map.addEventListener("zoomend",function(){a()(r.mapAyy);r.initProperty(),r.initGrid()}),new BMap.Autocomplete({input:"suggestId",location:r.map}).addEventListener("onconfirm",function(n){var t=n.item.value;i=t.province+t.city+t.district+t.street+t.business,r.address_detail=i,function(){var n=new BMap.LocalSearch(r.map,{onSearchComplete:function(){r.userlocation=n.getResults().getPoi(0).point,console.log("poi",r.userlocation),r.map.centerAndZoom(r.userlocation,13);var t=new BMap.Icon(e("35vI"),new BMap.Size(22,32));r.map.addOverlay(new BMap.Marker(r.userlocation,{icon:t}))}});console.log("myvalue",i),n.search(i)}()})},initProperty:function(){this.level=this.map.getZoom(),this.bounds={x1:this.map.getBounds().getSouthWest().lng,y1:this.map.getBounds().getSouthWest().lat,x2:this.map.getBounds().getNorthEast().lng,y2:this.map.getBounds().getNorthEast().lat},this.span=this.getSpan()},initGrid:function(){for(var n in this.xgrids)this.map.removeOverlay(this.xgrids[n]);for(var n in this.xgrids=[],this.ygrids)this.map.removeOverlay(this.ygrids[n]);this.ygrids=[];var r=this.span;for(n=this.bounds.x1+(this.initCenter.lng-this.bounds.x1)%r.x-r.x;n<this.bounds.x2+r.x;n+=r.x){var e=new BMap.Polyline([new BMap.Point(n.toFixed(6),this.bounds.y1),new BMap.Point(n.toFixed(6),this.bounds.y2)],{strokeColor:"black",strokeWeight:1,strokeOpacity:.5});this.xgrids.push(e),this.map.addOverlay(e)}for(n=this.bounds.y1+(this.initCenter.lat-this.bounds.y1)%r.y-r.y;n<this.bounds.y2+r.y;n+=r.y){e=new BMap.Polyline([new BMap.Point(this.bounds.x1,n.toFixed(6)),new BMap.Point(this.bounds.x2,n.toFixed(6))],{strokeColor:"black",strokeWeight:1,strokeOpacity:.5});this.ygrids.push(e),this.map.addOverlay(e)}console.log("网格数据",this.ygrids)},getSpan:function(){return{x:.0524,y:.04492}},getGrid:function(n){var r=this,e=this.xgrids.map(function(n){return n.getPath()[0].lng}).filter(function(e){return Math.abs(e-n.lng)<=r.span.x}).sort(function(n,r){return n-r}).slice(0,2),t=this.ygrids.map(function(n){return n.getPath()[0].lat}).filter(function(e){return Math.abs(e-n.lat)<=r.span.y}).sort(function(n,r){return n-r}).slice(0,2),a=new BMap.Marker(new BMap.Point(e[0]+.0262,t[0]+.02246));return this.map.addOverlay(a),[new BMap.Point(e[0],t[0]),new BMap.Point(e[0],t[1]),new BMap.Point(e[1],t[1]),new BMap.Point(e[1],t[0])]},reset:function(){this.map.reset()},ZPoint:function(n,r,e){this.code=e,this.point=new BMap.Point(n,r)},fromtext:function(){var n=this,r={};r.id=this.mapsd.area_id,r.level=this.mapsd.level,console.log("ddd",r),this.$axios.post(this.$api+"/map/map_data",r).then(function(r){console.log("返回数据",r),that.mapsd.area_rate=r.data.area_rate;var e={position:new BMap.Point(that.mapsd.cen_loc.lng,that.mapsd.cen_loc.lat),offset:new BMap.Size(-50,0)},t=new BMap.Label(that.mapsd.area_id+" 等级"+that.mapsd.level+" 系数:"+that.mapsd.area_rate,e);t.setStyle({color:"red",fontSize:"12px",height:"20px",lineHeight:"20px",fontFamily:"微软雅黑",width:"120px"}),n.map.addOverlay(t),t.addEventListener("click",function(){console.log("00000",that.mapsd),that.flag=!0}),n.flag=!1})},qvxiao:function(){this.flag=!1}}},o=function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("div",[e("el-form",{directives:[{name:"show",rawName:"v-show",value:n.flag,expression:"flag"}],ref:n.mapsd,staticClass:"from",attrs:{"label-width":"80px",model:n.mapsd}},[e("el-form-item",{attrs:{label:"区间ID"}},[e("el-input",{model:{value:n.mapsd.area_id,callback:function(r){n.$set(n.mapsd,"area_id",r)},expression:"mapsd.area_id"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"价格等级"}},[e("el-select",{attrs:{placeholder:"请选择价格等级"},model:{value:n.mapsd.level,callback:function(r){n.$set(n.mapsd,"level",r)},expression:"mapsd.level"}},[e("el-option",{attrs:{label:"A",value:"A"}}),n._v(" "),e("el-option",{attrs:{label:"B",value:"B"}}),n._v(" "),e("el-option",{attrs:{label:"C",value:"C"}}),n._v(" "),e("el-option",{attrs:{label:"D",value:"D"}})],1)],1),n._v(" "),e("el-form-item",{attrs:{label:"地址"}},[e("el-input",{model:{value:n.mapsd.address,callback:function(r){n.$set(n.mapsd,"address",r)},expression:"mapsd.address"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"地点"}},[e("el-input",{model:{value:n.mapsd.business,callback:function(r){n.$set(n.mapsd,"business",r)},expression:"mapsd.business"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"附近建筑物"}},[e("el-input",{model:{value:n.mapsd.surrounds,callback:function(r){n.$set(n.mapsd,"surrounds",r)},expression:"mapsd.surrounds"}})],1),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:n.fromtext}},[n._v("更新")]),n._v(" "),e("el-button",{on:{click:n.qvxiao}},[n._v("取消")])],1)],1),n._v(" "),e("div",{attrs:{id:"r-result"}},[n._v("\n    请输入:\n    "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.address_detail,expression:"address_detail"}],staticStyle:{width:"150px"},attrs:{type:"text",id:"suggestId",size:"20",name:"address_detail"},domProps:{value:n.address_detail},on:{input:function(r){r.target.composing||(n.address_detail=r.target.value)}}})]),n._v(" "),e("div",{staticClass:"map",attrs:{id:"map"}})],1)};o._withStripped=!0;var s={render:o,staticRenderFns:[]},l=s;var p=!1;var d=e("VU/8")(i,l,!1,function(n){p||e("YW3/")},"data-v-6587b508",null);d.options.__file="src/components/map.vue";var m={name:"map_list",components:{MapLists:d.exports}},c=function(){var n=this.$createElement,r=this._self._c||n;return r("div",[r("MapLists")],1)};c._withStripped=!0;var u={render:c,staticRenderFns:[]},h=u;var v=!1;var g=e("VU/8")(m,h,!1,function(n){v||e("KbGF")},"data-v-2bfcb249",null);g.options.__file="src/views/admin/map-list.vue";r.default=g.exports},qkKv:function(n,r,e){var t=e("FeBl"),a=t.JSON||(t.JSON={stringify:JSON.stringify});n.exports=function(n){return a.stringify.apply(a,arguments)}}});
//# sourceMappingURL=4.4246bc930e8dd0c965b4.js.map