webpackJsonp([7],{DkiB:function(r,e,t){var n=t("V3lX");"string"==typeof n&&(n=[[r.i,n,""]]),n.locals&&(r.exports=n.locals);t("rjj0")("0a67b0fc",n,!1,{})},"H+gd":function(r,e,t){"use strict";Date.prototype.Format=function(r){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var t in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+t+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?e[t]:("00"+e[t]).substr((""+e[t]).length)));return r};(new Date).Format("yyyy-MM-dd"),(new Date).Format("yyyy-MM-dd HH:mm:ss")},JdCn:function(r,e,t){var n=t("VePC");"string"==typeof n&&(n=[[r.i,n,""]]),n.locals&&(r.exports=n.locals);t("rjj0")("460650d8",n,!1,{})},UrIR:function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});t("mtWM"),t("nb/C"),t("H+gd");var n={name:"client_orders",data:function(){return{orders:[],toDispatch:[],workers:[],worker_id:"",orders_id:"",orders_time:"",starttime:"",endtime:"",order_list:{},worker:{},disabled:!0,amount:{back:""},flag:!1}},created:function(){},methods:{shows:function(r){r.preventDefault();var e=this.$refs.grid.kendoWidget().dataItem(r.currentTarget.closest("tr"));console.log("详情信息",e);e.order_no},fromtext:function(){this.flag=!1},showDetails:function(r){var e=this;r.preventDefault();var t=this.$refs.grid.kendoWidget().dataItem(r.currentTarget.closest("tr"));if(this.orders_id=t.order_id,1==t.order_status){var n={};n.order_ids=this.orders_id,n.order_status=2,console.log("系统ID",n),this.$axios.post("/dis/updateOrderStatus",n).then(function(r){e.toDispatch.push(t.order_no),e.$message({showClose:!0,message:r.data.errmsg})}).catch(function(r){console.log(r)})}else this.$message({showClose:!0,message:"此单不能更新!"})}}},o=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[t("div",{staticClass:"pagetitle"},[r._v("洗车订单")]),r._v(" "),t("el-form",{directives:[{name:"show",rawName:"v-show",value:r.flag,expression:"flag"}],ref:r.amount,staticClass:"from",attrs:{"label-width":"80px",model:r.amount}},[t("el-form-item",{attrs:{label:"返回金额"}},[t("el-input",{model:{value:r.amount.back,callback:function(e){r.$set(r.amount,"back",e)},expression:"amount.back"}})],1),r._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:r.fromtext}},[r._v("关闭")])],1)],1),r._v(" "),t("div",{staticClass:"grids"},[t("kendo-datasource",{ref:"datasource1",attrs:{"transport-read-url":"http://dev.upctech.com.cn/api/dis/getorderlist","page-size":20,"server-paging":!1}}),r._v(" "),t("kendo-grid",{ref:"grid",attrs:{"data-source-ref":"datasource1","sortable-mode":"multiple","sortable-allow-unsort":!0,"sortable-show-indexes":!0,"pageable-button-count":5,"server-filtering":!0,pageable:!0,"filterable-mode":"row"}},[t("kendo-grid-column",{attrs:{field:"order_no",width:220}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"order_id",",":"",title:"系统订单编号",width:120}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"nick_name",title:"用户昵称",width:220}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"item_title",title:"服务项目",width:120,"filterable-cell-operator":"contains","filterable-cell-suggestion-operator":"contains"}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"address_detail",title:"地址",width:250}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"order_status",title:"订单状态",width:120,format:"{0:c}"}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"service_date",title:"服务时间",width:120,format:"{0:c}"}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"start_time",title:"预约开始",width:120}}),r._v(" "),t("kendo-grid-column",{attrs:{field:"end_time",title:"预约截止",width:120}}),r._v(" "),t("kendo-grid-column",{attrs:{command:{text:"更改",click:r.showDetails},title:"&nbsp;",width:100}}),r._v(" "),t("kendo-grid-column",{attrs:{command:{text:"详情",click:r.shows},title:"&nbsp;",width:100}})],1)],1)],1)};o._withStripped=!0;var i={render:o,staticRenderFns:[]},a=i;var s=!1;var d=t("VU/8")(n,a,!1,function(r){s||t("JdCn")},"data-v-ef3b46ca",null);d.options.__file="src/components/client-orders-all.vue";var l={name:"order-list-all",components:{OrderAll:d.exports}},c=function(){var r=this.$createElement;return(this._self._c||r)("OrderAll")};c._withStripped=!0;var m={render:c,staticRenderFns:[]},u=m;var p=!1;var g=t("VU/8")(l,u,!1,function(r){p||t("DkiB")},"data-v-e23cf62a",null);g.options.__file="src/views/admin/order-list-all.vue";e.default=g.exports},V3lX:function(r,e,t){(r.exports=t("FZ+f")(!0)).push([r.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"order-list-all.vue",sourceRoot:""}])},VePC:function(r,e,t){(r.exports=t("FZ+f")(!0)).push([r.i,"\nh1[data-v-ef3b46ca],\r\nh2[data-v-ef3b46ca] {\r\n  font-weight: normal;\n}\nul[data-v-ef3b46ca] {\r\n  list-style-type: none;\r\n  padding: 0;\n}\nli[data-v-ef3b46ca] {\r\n  display: inline-block;\r\n  margin: 0 10px;\n}\na[data-v-ef3b46ca] {\r\n  color: #42b983;\n}\n.grids[data-v-ef3b46ca] {\r\n  width: 95%;\r\n  /*float:left*/\r\n  margin: auto;\n}\n.select[data-v-ef3b46ca] {\r\n  display: block;\n}\n.orders[data-v-ef3b46ca] {\r\n  width: 19%;\r\n  float: right;\r\n  /*border:1px solid red*/\n}\n.btn[data-v-ef3b46ca] {\r\n  margin: 20px 0;\r\n  width: 70%;\n}\n.wrk-list li[data-v-ef3b46ca] {\r\n  margin: 8px 0;\n}\r\n","",{version:3,sources:["D:/my-vue-webpack/utc-vue-webpack/src/components/src/components/client-orders-all.vue"],names:[],mappings:";AAiMA;;EAEA,oBAAA;CACA;AACA;EACA,sBAAA;EACA,WAAA;CACA;AACA;EACA,sBAAA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA;AAEA;EACA,WAAA;EACA,cAAA;EACA,aAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,WAAA;EACA,aAAA;EACA,wBAAA;CACA;AACA;EACA,eAAA;EACA,WAAA;CACA;AACA;EACA,cAAA;CACA",file:"client-orders-all.vue",sourcesContent:['<template>\r\n  <div>\r\n    <div class="pagetitle">洗车订单</div>\r\n    <el-form label-width="80px" :ref="amount" :model="amount" v-show="flag" class="from">\r\n      <el-form-item label="返回金额">\r\n        <el-input v-model="amount.back"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button type="primary" @click="fromtext">关闭</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    \x3c!--<div class="orders">--\x3e\r\n    \x3c!--<h3>待派单</h3>--\x3e\r\n    \x3c!-- <p>{{toDispatch}}</p> --\x3e\r\n\r\n    \x3c!--<ul class="wrk-list">--\x3e\r\n    \x3c!--<li--\x3e\r\n    \x3c!--v-for="(j,index) in toDispatch"--\x3e\r\n    \x3c!--:key="j"--\x3e\r\n    \x3c!--&gt;--\x3e\r\n    \x3c!--<div class="view">--\x3e\r\n    \x3c!--<button class="destroy" @click="moveDist(index)">{{j}} -</button>--\x3e\r\n    \x3c!--</div>--\x3e\r\n    \x3c!--</li>--\x3e\r\n    \x3c!--</ul>--\x3e\r\n    \x3c!--<h3>选择技师</h3>--\x3e\r\n    \x3c!--<div >--\x3e\r\n    \x3c!--<el-select v-model="worker_id" placeholder="请选择" @chang     e="getValue" :disabled="disabled">--\x3e\r\n    \x3c!--<el-option--\x3e\r\n    \x3c!--v-for="wk in workers"--\x3e\r\n    \x3c!--:key="wk.uid"--\x3e\r\n    \x3c!--:label="wk.nick_name"--\x3e\r\n    \x3c!--:value="wk.uid" class="select">--\x3e\r\n    \x3c!--</el-option>--\x3e\r\n    \x3c!--</el-select>--\x3e\r\n    \x3c!--</div>--\x3e\r\n    \x3c!--<button class="btn" @click="postParmas">提交</button>--\x3e\r\n    \x3c!--</div>--\x3e\r\n\r\n    <div class="grids">\r\n      <kendo-datasource\r\n        ref="datasource1"\r\n        :transport-read-url="\'http://dev.upctech.com.cn/api/dis/getorderlist\'"\r\n        :page-size="20"\r\n        :server-paging="false"\r\n      ></kendo-datasource>\r\n      <kendo-grid\r\n        ref="grid"\r\n        :data-source-ref="\'datasource1\'"\r\n        :sortable-mode="\'multiple\'"\r\n        :sortable-allow-unsort="true"\r\n        :sortable-show-indexes="true"\r\n        :pageable-button-count="5"\r\n        :server-filtering="true"\r\n        :pageable="true"\r\n        :filterable-mode="\'row\'"\r\n      >\r\n        <kendo-grid-column :field="\'order_no\'" :width="220"></kendo-grid-column>\r\n        <kendo-grid-column :field="\'order_id\'" , :title="\'系统订单编号\'" :width="120"></kendo-grid-column>\r\n        <kendo-grid-column :field="\'nick_name\'" :title="\'用户昵称\'" :width="220"></kendo-grid-column>\r\n        <kendo-grid-column\r\n          :field="\'item_title\'"\r\n          :title="\'服务项目\'"\r\n          :width="120"\r\n          :filterable-cell-operator="\'contains\'"\r\n          :filterable-cell-suggestion-operator="\'contains\'"\r\n        ></kendo-grid-column>\r\n        <kendo-grid-column :field="\'address_detail\'" :title="\'地址\'" :width="250"></kendo-grid-column>\r\n        <kendo-grid-column :field="\'order_status\'" :title="\'订单状态\'" :width="120" :format="\'{0:c}\'"></kendo-grid-column>\r\n        <kendo-grid-column :field="\'service_date\'" :title="\'服务时间\'" :width="120" :format="\'{0:c}\'"></kendo-grid-column>\r\n        <kendo-grid-column :field="\'start_time\'" :title="\'预约开始\'" :width="120"></kendo-grid-column>\r\n        <kendo-grid-column :field="\'end_time\'" :title="\'预约截止\'" :width="120"></kendo-grid-column>\r\n        <kendo-grid-column\r\n          :command="{ text: \'更改\', click: showDetails }"\r\n          :title="\'&nbsp;\'"\r\n          :width="100"\r\n        ></kendo-grid-column>\r\n        <kendo-grid-column :command="{ text: \'详情\', click: shows}" :title="\'&nbsp;\'" :width="100"></kendo-grid-column>\r\n      </kendo-grid>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n// import http from \'../api/http\'\r\nimport axios from "axios";\r\n// Vue.prototype.$http = axios;\r\nimport { DropdownsInstaller } from "@progress/kendo-ui";\r\nimport time from "../api/time";\r\n\r\nexport default {\r\n  name: "client_orders",\r\n  data() {\r\n    return {\r\n      orders: [],\r\n      toDispatch: [],\r\n      workers: [],\r\n      worker_id: "",\r\n      orders_id: "",\r\n      orders_time: "",\r\n      starttime: "",\r\n      endtime: "",\r\n      order_list: {},\r\n      worker: {},\r\n      disabled: true,\r\n      amount: {\r\n        back: ""\r\n      },\r\n      flag: false\r\n    };\r\n  },\r\n  created() {\r\n    // let wrk_url = "http://dev.upctech.com.cn/api/dis/getworklist";\r\n    // let params = {}\r\n    // params.city = "上海市"\r\n    // axios.post(wrk_url,params).then(res => {\r\n    //   console.log(res);\r\n    //   this.workers = res.data;\r\n    // });\r\n    // this.GetOrders();\r\n  },\r\n  methods: {\r\n    // parameterMap: function(options, operation) {\r\n    //   if (operation !== "read" && options.models) {\r\n    //     return { models: kendo.stringify(options.models) };\r\n    //   }\r\n    // },\r\n    shows: function(e) {\r\n      let that = this;\r\n      e.preventDefault();\r\n      var grid = this.$refs.grid.kendoWidget();\r\n      var dataItem = grid.dataItem(e.currentTarget.closest("tr"));\r\n      console.log("详情信息", dataItem);\r\n\r\n      let params = {};\r\n      params.order_no = dataItem.order_no;\r\n    },\r\n    fromtext() {\r\n      this.flag = false;\r\n    },\r\n    showDetails: function(e) {\r\n      e.preventDefault();\r\n      var grid = this.$refs.grid.kendoWidget();\r\n      var dataItem = grid.dataItem(e.currentTarget.closest("tr"));\r\n      // alert(\'"\' + dataItem.order_no + \'" 准备派单.\');\r\n      // this.data.toDispatch.append(dataItem.order_no);\r\n\r\n      //获取数据\r\n      this.orders_id = dataItem.order_id;\r\n      //\r\n      //\r\n      // //获取预约开始时间前一个小时\r\n      // this.starttime = dataItem.service_date + \' \' + dataItem.start_time\r\n      // this.endtime = dataItem.service_date + " " +  dataItem.end_time\r\n\r\n      //判断订单状态\r\n      if (dataItem.order_status == 1) {\r\n        // this.orders_id.push(dataItem.order_id)\r\n        // console.log(dataItem.order_no);\r\n\r\n        let params = {};\r\n        params.order_ids = this.orders_id;\r\n        params.order_status = 2;\r\n        console.log("系统ID", params);\r\n        this.$axios\r\n          .post("/dis/updateOrderStatus", params)\r\n          .then(res => {\r\n            this.toDispatch.push(dataItem.order_no);\r\n\r\n            //派单数据\r\n            this.$message({\r\n              showClose: true,\r\n              message: res.data.errmsg\r\n            });\r\n          })\r\n          .catch(function(error) {\r\n            console.log(error);\r\n          });\r\n      } else {\r\n        this.$message({\r\n          showClose: true,\r\n          message: "此单不能更新!"\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n<\/script>\r\n\r\n\x3c!-- Add "scoped" attribute to limit CSS to this component only --\x3e\r\n<style scoped>\r\nh1,\r\nh2 {\r\n  font-weight: normal;\r\n}\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  display: inline-block;\r\n  margin: 0 10px;\r\n}\r\na {\r\n  color: #42b983;\r\n}\r\n\r\n.grids {\r\n  width: 95%;\r\n  /*float:left*/\r\n  margin: auto;\r\n}\r\n.select {\r\n  display: block;\r\n}\r\n.orders {\r\n  width: 19%;\r\n  float: right;\r\n  /*border:1px solid red*/\r\n}\r\n.btn {\r\n  margin: 20px 0;\r\n  width: 70%;\r\n}\r\n.wrk-list li {\r\n  margin: 8px 0;\r\n}\r\n</style>\r\n'],sourceRoot:""}])}});
//# sourceMappingURL=7.b8dbf00fc8e2cdfc5167.js.map