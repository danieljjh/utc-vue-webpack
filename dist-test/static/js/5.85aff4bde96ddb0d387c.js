webpackJsonp([5],{"6+iN":function(e,t,a){var r=a("H3Jw");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("c2145c1c",r,!1,{})},BO1k:function(e,t,a){e.exports={default:a("fxRn"),__esModule:!0}},H3Jw:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"\n.choose {\r\n  margin: 10px 0;\n}\n.choosetitle {\r\n  width: 20%;\r\n  display: inline-block;\n}\n.chooseinp {\r\n  width: 60%;\r\n  display: inline-block;\n}\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\n}\n.nametext {\r\n  padding: 20px;\n}\r\n","",{version:3,sources:["D:/my-vue-webpack/utc-vue-webpack/src/views/admin/src/views/admin/source-query.vue"],names:[],mappings:";AA4HA;EACA,eAAA;CACA;AACA;EACA,WAAA;EACA,sBAAA;CACA;AACA;EACA,WAAA;EACA,sBAAA;CACA;AACA;EACA,aAAA;EACA,wBAAA;CACA;AACA;EACA,cAAA;CACA",file:"source-query.vue",sourcesContent:['<template>\r\n  <div class="home">\r\n    <div class="pagetitle">来源记录</div>\r\n    <el-row type="flex" class="row-bg" justify="space-between">\r\n      <el-col :span="11">\r\n        <div class="nametext">市场活动</div>\r\n        <el-table :data="tableData" :border="true" style="width: 100%">\r\n          <el-table-column prop="market_event_id" label="市场活动id" width="180"></el-table-column>\r\n          <el-table-column prop="event_name" label="活动名称"></el-table-column>\r\n          <el-table-column prop="user_openid" label="用户openid"></el-table-column>\r\n        </el-table>\r\n        <div class="nametext">E帮洗车</div>\r\n        <el-table :data="tableData1" :border="true" style="width: 100%">\r\n          <el-table-column prop="nickname" label="用户名" width="180"></el-table-column>\r\n          <el-table-column prop="openid" label="Openid"></el-table-column>\r\n          <el-table-column label="操作" width="300">\r\n            <template slot-scope="scope">\r\n              <el-button @click="detailsdata(scope.row)" type="text" size="small">详情</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-col>\r\n      <el-col :span="11">\r\n        <div class="nametext">节油大师</div>\r\n        <el-table :data="tableData2" :border="true" style="width: 100%">\r\n          <el-table-column prop="nickname" label="用户名" width="180"></el-table-column>\r\n          <el-table-column prop="openid" label="Openid"></el-table-column>\r\n          <el-table-column label="操作" width="300">\r\n            <template slot-scope="scope">\r\n              <el-button @click="detailsdata(scope.row)" type="text" size="small">详情</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-col>\r\n    </el-row>\r\n    \x3c!-- 详情 --\x3e\r\n    <el-dialog title="用户详情" :visible.sync="createactivityoperate">\r\n      <el-table :data="detailsdatas" height="250" border style="width: 100%">\r\n        <el-table-column prop="points" label="获取积分" width="180"></el-table-column>\r\n        <el-table-column prop="user_event_id" label="活动ID" width="180"></el-table-column>\r\n        <el-table-column prop="username" label="被分享人用户名"></el-table-column>\r\n        <el-table-column prop="viewer_openid" label="被分享人ID"></el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      input: "",\r\n      createactivityoperate: false,\r\n      tableData: [],\r\n      tableData1: [],\r\n      tableData2: [],\r\n      detailsdatas: [],\r\n      userdata: []\r\n    };\r\n  },\r\n  mounted() {\r\n    var _that = this;\r\n    _that.$axios.get("/wx/event/market_event/result_list").then(res => {\r\n      _that._data.tableData = res.data.mkt_result;\r\n    });\r\n    _that._data.tableData1 = _that.getdata(\r\n      "https://wx.upctech.com.cn/wx/followers/",\r\n      "https://wx.upctech.com.cn/wx/user_info?uid="\r\n    );\r\n    _that._data.tableData2 = _that.getdata(\r\n      "https://wx.upctech.com.cn/wx/worker/followers/",\r\n      "https://wx.upctech.com.cn/wx/worker/user_info?uid="\r\n    );\r\n  },\r\n  methods: {\r\n    getdata: function(url1, url2) {\r\n      var _that = this;\r\n      var datas = [];\r\n      _that.$axios.get(url1).then(res => {\r\n        for (var items of res.data.data.openid) {\r\n          _that.$axios.get(url2 + items).then(res => {\r\n            datas.push(res.data);\r\n            _that._data.userdata.push(res.data);\r\n          });\r\n        }\r\n      });\r\n      return datas;\r\n    },\r\n    detailsdata: function(e) {\r\n      var datas = [];\r\n      var user = {};\r\n      var _that = this;\r\n      _that.$axios\r\n        .get("/wx/event/user_event/result_by_openid/?openid=" + e.openid)\r\n        .then(res => {\r\n          if (res.data.user_event_result == null) {\r\n            _that.$message.error("抱歉，当前查询用户未记录");\r\n          } else {\r\n            _that._data.createactivityoperate = true;\r\n            for (var items of res.data.user_event_result) {\r\n              user.points = items.points;\r\n              user.user_event_id = items.user_event_id;\r\n              user.viewer_openid = items.viewer_openid;\r\n              user.username = _that.getusername(items.viewer_openid);\r\n              datas.push(user);\r\n              user = {};\r\n            }\r\n            _that._data.detailsdatas = datas;\r\n          }\r\n        });\r\n    },\r\n    getusername: function(user) {\r\n      var _that = this;\r\n      for (var items of _that._data.userdata) {\r\n        if (items.openid == user) {\r\n          return items.nickname;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n<\/script>\r\n<style>\r\n.choose {\r\n  margin: 10px 0;\r\n}\r\n.choosetitle {\r\n  width: 20%;\r\n  display: inline-block;\r\n}\r\n.chooseinp {\r\n  width: 60%;\r\n  display: inline-block;\r\n}\r\n.add {\r\n  float: right;\r\n  margin: 5px 47px 15px 0;\r\n}\r\n.nametext {\r\n  padding: 20px;\r\n}\r\n</style>\r\n'],sourceRoot:""}])},fxRn:function(e,t,a){a("+tPU"),a("zQR9"),e.exports=a("g8Ux")},g8Ux:function(e,t,a){var r=a("77Pl"),n=a("3fs2");e.exports=a("FeBl").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},ofj3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("BO1k"),n=a.n(r),l={data:function(){return{input:"",createactivityoperate:!1,tableData:[],tableData1:[],tableData2:[],detailsdatas:[],userdata:[]}},mounted:function(){var e=this;e.$axios.get("/wx/event/market_event/result_list").then(function(t){e._data.tableData=t.data.mkt_result}),e._data.tableData1=e.getdata("https://wx.upctech.com.cn/wx/followers/","https://wx.upctech.com.cn/wx/user_info?uid="),e._data.tableData2=e.getdata("https://wx.upctech.com.cn/wx/worker/followers/","https://wx.upctech.com.cn/wx/worker/user_info?uid=")},methods:{getdata:function(e,t){var a=this,r=[];return a.$axios.get(e).then(function(e){var l=!0,i=!1,s=void 0;try{for(var o,d=n()(e.data.data.openid);!(l=(o=d.next()).done);l=!0){var u=o.value;a.$axios.get(t+u).then(function(e){r.push(e.data),a._data.userdata.push(e.data)})}}catch(e){i=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw s}}}),r},detailsdata:function(e){var t=[],a={},r=this;r.$axios.get("/wx/event/user_event/result_by_openid/?openid="+e.openid).then(function(e){if(null==e.data.user_event_result)r.$message.error("抱歉，当前查询用户未记录");else{r._data.createactivityoperate=!0;var l=!0,i=!1,s=void 0;try{for(var o,d=n()(e.data.user_event_result);!(l=(o=d.next()).done);l=!0){var u=o.value;a.points=u.points,a.user_event_id=u.user_event_id,a.viewer_openid=u.viewer_openid,a.username=r.getusername(u.viewer_openid),t.push(a),a={}}}catch(e){i=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw s}}r._data.detailsdatas=t}})},getusername:function(e){var t=!0,a=!1,r=void 0;try{for(var l,i=n()(this._data.userdata);!(t=(l=i.next()).done);t=!0){var s=l.value;if(s.openid==e)return s.nickname}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"pagetitle"},[e._v("来源记录")]),e._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"nametext"},[e._v("市场活动")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{prop:"market_event_id",label:"市场活动id",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"event_name",label:"活动名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_openid",label:"用户openid"}})],1),e._v(" "),a("div",{staticClass:"nametext"},[e._v("E帮洗车")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,border:!0}},[a("el-table-column",{attrs:{prop:"nickname",label:"用户名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"Openid"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.detailsdata(t.row)}}},[e._v("详情")])]}}])})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"nametext"},[e._v("节油大师")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,border:!0}},[a("el-table-column",{attrs:{prop:"nickname",label:"用户名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"Openid"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.detailsdata(t.row)}}},[e._v("详情")])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"用户详情",visible:e.createactivityoperate},on:{"update:visible":function(t){e.createactivityoperate=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailsdatas,height:"250",border:""}},[a("el-table-column",{attrs:{prop:"points",label:"获取积分",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_event_id",label:"活动ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"被分享人用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"viewer_openid",label:"被分享人ID"}})],1)],1)],1)};i._withStripped=!0;var s={render:i,staticRenderFns:[]},o=s;var d=!1;var u=a("VU/8")(l,o,!1,function(e){d||a("6+iN")},null,null);u.options.__file="src/views/admin/source-query.vue";t.default=u.exports}});
//# sourceMappingURL=5.85aff4bde96ddb0d387c.js.map